<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Tee Yu Cheng">

<title>Global Terrorism Index Analysis (2012-2022)</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="overall_files/libs/clipboard/clipboard.min.js"></script>
<script src="overall_files/libs/quarto-html/quarto.js"></script>
<script src="overall_files/libs/quarto-html/popper.min.js"></script>
<script src="overall_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="overall_files/libs/quarto-html/anchor.min.js"></script>
<link href="overall_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="overall_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="overall_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="overall_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="overall_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<link href="overall_files/libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">

<script src="overall_files/libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>

<script src="overall_files/libs/plotly-binding-4.10.4/plotly.js"></script>

<script src="overall_files/libs/typedarray-0.1/typedarray.min.js"></script>

<script src="overall_files/libs/jquery-3.5.1/jquery.min.js"></script>

<link href="overall_files/libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">

<script src="overall_files/libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>

<link href="overall_files/libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">

<script src="overall_files/libs/plotly-main-2.11.1/plotly-latest.min.js"></script>



</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Contents</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">1. Introduction</a></li>
  <li><a href="#exploration-data-analysis" id="toc-exploration-data-analysis" class="nav-link" data-scroll-target="#exploration-data-analysis">2. Exploration Data Analysis</a>
  <ul class="collapse">
  <li><a href="#terrorism-index-overview" id="toc-terrorism-index-overview" class="nav-link" data-scroll-target="#terrorism-index-overview">2.1. Terrorism Index Overview</a></li>
  <li><a href="#detailed-country-analysis-with-severity-classification" id="toc-detailed-country-analysis-with-severity-classification" class="nav-link" data-scroll-target="#detailed-country-analysis-with-severity-classification">2.2. Detailed Country Analysis with Severity Classification</a></li>
  <li><a href="#impact-analysis-casualties-and-incidents" id="toc-impact-analysis-casualties-and-incidents" class="nav-link" data-scroll-target="#impact-analysis-casualties-and-incidents">2.3. Impact Analysis: Casualties and Incidents</a>
  <ul class="collapse">
  <li><a href="#top-15-countries-by-total-fatalities" id="toc-top-15-countries-by-total-fatalities" class="nav-link" data-scroll-target="#top-15-countries-by-total-fatalities">2.3.1. Top 15 Countries by Total Fatalities</a></li>
  <li><a href="#top-15-countries-by-total-injuries" id="toc-top-15-countries-by-total-injuries" class="nav-link" data-scroll-target="#top-15-countries-by-total-injuries">2.3.2. Top 15 Countries by Total Injuries</a></li>
  <li><a href="#top-15-countries-by-total-incidents" id="toc-top-15-countries-by-total-incidents" class="nav-link" data-scroll-target="#top-15-countries-by-total-incidents">2.3.3. Top 15 Countries by Total Incidents</a></li>
  <li><a href="#top-15-countries-by-total-hostages" id="toc-top-15-countries-by-total-hostages" class="nav-link" data-scroll-target="#top-15-countries-by-total-hostages">2.3.4. Top 15 Countries by Total Hostages</a></li>
  </ul></li>
  <li><a href="#global-trends-over-time" id="toc-global-trends-over-time" class="nav-link" data-scroll-target="#global-trends-over-time">2.4. Global Trends Over Time</a></li>
  <li><a href="#multi-dimensional-analysis" id="toc-multi-dimensional-analysis" class="nav-link" data-scroll-target="#multi-dimensional-analysis">2.5. Multi-Dimensional Analysis</a></li>
  </ul></li>
  <li><a href="#data-pre-processing" id="toc-data-pre-processing" class="nav-link" data-scroll-target="#data-pre-processing">3. Data Pre-Processing</a>
  <ul class="collapse">
  <li><a href="#data-ingestion" id="toc-data-ingestion" class="nav-link" data-scroll-target="#data-ingestion">3.1. Data Ingestion</a></li>
  <li><a href="#cleaning-normalization" id="toc-cleaning-normalization" class="nav-link" data-scroll-target="#cleaning-normalization">3.2. Cleaning &amp; Normalization</a></li>
  <li><a href="#post-cleaning-validation" id="toc-post-cleaning-validation" class="nav-link" data-scroll-target="#post-cleaning-validation">3.3. Post-cleaning Validation</a></li>
  <li><a href="#filtering-period-selection" id="toc-filtering-period-selection" class="nav-link" data-scroll-target="#filtering-period-selection">3.4. Filtering &amp; Period Selection</a></li>
  <li><a href="#selecting-top-8-countries-by-total-fatalities" id="toc-selecting-top-8-countries-by-total-fatalities" class="nav-link" data-scroll-target="#selecting-top-8-countries-by-total-fatalities">3.5. Selecting Top 8 Countries by Total Fatalities</a></li>
  <li><a href="#summarise-annual-fatalities" id="toc-summarise-annual-fatalities" class="nav-link" data-scroll-target="#summarise-annual-fatalities">3.6. Summarise Annual Fatalities</a></li>
  </ul></li>
  <li><a href="#visualizing-annual-fatalities" id="toc-visualizing-annual-fatalities" class="nav-link" data-scroll-target="#visualizing-annual-fatalities">4. Visualizing Annual Fatalities</a></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion">5. Conclusion</a></li>
  <li><a href="#additional-information" id="toc-additional-information" class="nav-link" data-scroll-target="#additional-information">6. Additional Information</a></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">Global Terrorism Index Analysis (2012-2022)</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
<p class="subtitle lead">Exploring Patterns and Trends in Terrorism Impact</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p><code>Tee Yu Cheng</code> </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<style>
h1, h2, h3, h4 {
  color: #2c3e50;
}
.section-divider {
  border-top: 1px solid #e0e0e0;
  margin: 2em 0;
}
.description-box {
  background-color: #f8f9fa;
  padding: 1em;
  margin: 1em 0;
  border-radius: 4px;
}
.highlight-box {
  border-left: 5px solid #f0ad4e;
  background-color: #fcf8e3;
  padding: 1em;
  margin: 1em 0;
}
.insight-box {
  border-left: 5px solid #5bc0de;
  background-color: #f0f7fd;
  padding: 1em;
  margin: 1em 0;
}
</style>
<section id="introduction" class="level1 section-header">
<h1 class="section-header">1. Introduction</h1>
<div class="description-box">
<p>This analysis explores the Global Terrorism Index (GTI) data from 2012 to 2022, examining trends and patterns in terrorism impact across countries. The GTI is a comprehensive measure that incorporates incidents, fatalities, injuries, and hostage situations to quantify the impact of terrorism globally.</p>
</div>
</section>
<section id="exploration-data-analysis" class="level1 section-header">
<h1 class="section-header">2. Exploration Data Analysis</h1>
<section id="terrorism-index-overview" class="level2 section-header">
<h2 class="section-header anchored" data-anchor-id="terrorism-index-overview">2.1. Terrorism Index Overview</h2>
<div class="description-box">
<p>The first visualization shows the overall trend of GTI scores for the top 15 most affected countries from 2012 to 2022. This provides a comparative view of how terrorism impact has evolved over time across these nations.</p>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the data</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(filtered_df, <span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> Score, <span class="at">color =</span> Country)) <span class="sc">+</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">linewidth =</span> <span class="fl">1.2</span>) <span class="sc">+</span>   <span class="co"># ← updated here</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Top 15 Countries by Terrorism Index Score (2012–2022)"</span>,</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"GTI Score"</span>,</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Year"</span>,</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">color =</span> <span class="st">"Country"</span>) <span class="sc">+</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.position =</span> <span class="st">"bottom"</span>,</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="overall_files/figure-html/overall-trend-1.png" class="img-fluid figure-img" width="1152"></p>
<figcaption>Trend of GTI Scores for Top 15 Most Affected Countries (2012-2022)</figcaption>
</figure>
</div>
</div>
</div>
<div class="insight-box">
<p><strong>Key Insights:</strong><br><br> • Afghanistan has consistently maintained the highest GTI score throughout most of the period<br> • Iraq shows a significant decline in terrorism impact since its peak around 2014-2015<br> • Several countries show recent increases in their GTI scores, suggesting emerging terrorism hotspots<br> • The overall pattern reveals fluctuating impacts, indicating the dynamic nature of terrorism threats globally</p>
</div>
</section>
<section id="detailed-country-analysis-with-severity-classification" class="level2 section-header">
<h2 class="section-header anchored" data-anchor-id="detailed-country-analysis-with-severity-classification">2.2. Detailed Country Analysis with Severity Classification</h2>
<div class="description-box">
<p>This visualization breaks down the terrorism index trends by country with clear severity classifications. The background color bands indicate different severity levels (Severe, High, Moderate, Low), providing context for interpreting the GTI scores.</p>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(filtered_df, <span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> Score)) <span class="sc">+</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Severity background bands (more visible)</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"rect"</span>, <span class="at">xmin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">xmax =</span> <span class="cn">Inf</span>, <span class="at">ymin =</span> <span class="dv">8</span>, <span class="at">ymax =</span> <span class="dv">10</span>,</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">fill =</span> <span class="st">"#B22222"</span>, <span class="at">alpha =</span> <span class="fl">0.15</span>) <span class="sc">+</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"rect"</span>, <span class="at">xmin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">xmax =</span> <span class="cn">Inf</span>, <span class="at">ymin =</span> <span class="dv">6</span>, <span class="at">ymax =</span> <span class="dv">8</span>,</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>           <span class="at">fill =</span> <span class="st">"#FF8C00"</span>, <span class="at">alpha =</span> <span class="fl">0.15</span>) <span class="sc">+</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"rect"</span>, <span class="at">xmin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">xmax =</span> <span class="cn">Inf</span>, <span class="at">ymin =</span> <span class="dv">4</span>, <span class="at">ymax =</span> <span class="dv">6</span>,</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>           <span class="at">fill =</span> <span class="st">"#FFD700"</span>, <span class="at">alpha =</span> <span class="fl">0.15</span>) <span class="sc">+</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"rect"</span>, <span class="at">xmin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">xmax =</span> <span class="cn">Inf</span>, <span class="at">ymin =</span> <span class="dv">0</span>, <span class="at">ymax =</span> <span class="dv">4</span>,</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>           <span class="at">fill =</span> <span class="st">"#90EE90"</span>, <span class="at">alpha =</span> <span class="fl">0.15</span>) <span class="sc">+</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add labels to indicate severity zones</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">x =</span> <span class="dv">2013</span>, <span class="at">y =</span> <span class="dv">9</span>, <span class="at">label =</span> <span class="st">"Severe"</span>, <span class="at">color =</span> <span class="st">"#8B0000"</span>, <span class="at">size =</span> <span class="dv">4</span>, <span class="at">fontface =</span> <span class="st">"bold"</span>) <span class="sc">+</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">x =</span> <span class="dv">2013</span>, <span class="at">y =</span> <span class="dv">7</span>, <span class="at">label =</span> <span class="st">"High"</span>, <span class="at">color =</span> <span class="st">"#FF8C00"</span>, <span class="at">size =</span> <span class="dv">4</span>, <span class="at">fontface =</span> <span class="st">"bold"</span>) <span class="sc">+</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">x =</span> <span class="dv">2013</span>, <span class="at">y =</span> <span class="dv">5</span>, <span class="at">label =</span> <span class="st">"Moderate"</span>, <span class="at">color =</span> <span class="st">"#DAA520"</span>, <span class="at">size =</span> <span class="dv">4</span>, <span class="at">fontface =</span> <span class="st">"bold"</span>) <span class="sc">+</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">x =</span> <span class="dv">2013</span>, <span class="at">y =</span> <span class="dv">2</span>, <span class="at">label =</span> <span class="st">"Low"</span>, <span class="at">color =</span> <span class="st">"#228B22"</span>, <span class="at">size =</span> <span class="dv">4</span>, <span class="at">fontface =</span> <span class="st">"bold"</span>) <span class="sc">+</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Main line chart</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">color =</span> <span class="st">"#000000"</span>, <span class="at">linewidth =</span> <span class="fl">1.2</span>) <span class="sc">+</span></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">color =</span> <span class="st">"#000000"</span>, <span class="at">size =</span> <span class="fl">1.2</span>) <span class="sc">+</span></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Faceted by country</span></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>Country, <span class="at">ncol =</span> <span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">12</span>) <span class="sc">+</span></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Terrorism Index Trends by Country (2012–2022)"</span>,</span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"GTI Scores Categorized by Severity Levels"</span>,</span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Year"</span>,</span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"GTI Score (0–10)</span><span class="sc">\n</span><span class="st">Higher = More Impact from Terrorism"</span></span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">16</span>, <span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">13</span>, <span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">11</span>, <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>),</span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>()</span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="overall_files/figure-html/country-severity-1.png" class="img-fluid figure-img" width="1152"></p>
<figcaption>Terrorism Index Trends by Country (2012–2022), with Severity Levels</figcaption>
</figure>
</div>
</div>
</div>
<div class="insight-box">
<p><strong>Key Insights:</strong><br> <br> • Most countries have experienced periods in the “High” to “Severe” range during the decade<br> • Some countries show clear improvement patterns (Iraq, Syria, Nigeria)<br> • Others demonstrate concerning upward trends (Burkina Faso, Mali)<br> • Afghanistan has remained consistently in the “Severe” category<br> • The severity classification provides important context for understanding the relative impact of terrorism</p>
</div>
</section>
<section id="impact-analysis-casualties-and-incidents" class="level2 section-header">
<h2 class="section-header anchored" data-anchor-id="impact-analysis-casualties-and-incidents">2.3. Impact Analysis: Casualties and Incidents</h2>
<section id="top-15-countries-by-total-fatalities" class="level3 section-header">
<h3 class="section-header anchored" data-anchor-id="top-15-countries-by-total-fatalities">2.3.1. Top 15 Countries by Total Fatalities</h3>
<div class="description-box">
<p>This visualization shows the countries with the highest number of terrorism-related fatalities over the 2012-2022 period. The number of fatalities is a direct measure of the human cost of terrorism.</p>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>top_deaths <span class="ot">&lt;-</span> combined_raw_df <span class="sc">%&gt;%</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Country) <span class="sc">%&gt;%</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Total_Deaths =</span> <span class="fu">sum</span>(Fatalities, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Total_Deaths)) <span class="sc">%&gt;%</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">15</span>)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(top_deaths, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(Country, Total_Deaths), <span class="at">y =</span> Total_Deaths)) <span class="sc">+</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">fill =</span> <span class="st">"darkred"</span>) <span class="sc">+</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add value labels at the end of each bar</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">format</span>(Total_Deaths, <span class="at">big.mark =</span> <span class="st">","</span>)), </span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>            <span class="at">hjust =</span> <span class="sc">-</span><span class="fl">0.2</span>, <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">fontface =</span> <span class="st">"bold"</span>, <span class="at">size =</span> <span class="fl">3.5</span>) <span class="sc">+</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>(<span class="at">clip =</span> <span class="st">"off"</span>) <span class="sc">+</span>  <span class="co"># Prevent clipping of labels</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="cf">function</span>(x) <span class="fu">c</span>(<span class="dv">0</span>, x[<span class="dv">2</span>] <span class="sc">*</span> <span class="fl">1.1</span>)) <span class="sc">+</span>  <span class="co"># Expand y-axis to make room for labels</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Top 15 Countries by Total Fatalities (2012–2022)"</span>,</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Country"</span>, <span class="at">y =</span> <span class="st">"Total Fatalities"</span>) <span class="sc">+</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.margin =</span> <span class="fu">margin</span>(<span class="fl">5.5</span>, <span class="dv">30</span>, <span class="fl">5.5</span>, <span class="fl">5.5</span>)  <span class="co"># Add right margin for labels</span></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="overall_files/figure-html/fatalities-1.png" class="img-fluid figure-img" width="1152"></p>
<figcaption>Countries with Highest Terrorism-Related Fatalities (2012-2022)</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="top-15-countries-by-total-injuries" class="level3 section-header">
<h3 class="section-header anchored" data-anchor-id="top-15-countries-by-total-injuries">2.3.2. Top 15 Countries by Total Injuries</h3>
<div class="description-box">
<p>Beyond fatalities, injuries represent another significant impact of terrorism. This visualization shows the countries with the highest number of terrorism-related injuries, which often outnumber fatalities and create long-term burdens on healthcare systems.</p>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>top_injuries <span class="ot">&lt;-</span> combined_raw_df <span class="sc">%&gt;%</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Country) <span class="sc">%&gt;%</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Total_Injuries =</span> <span class="fu">sum</span>(Injuries, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Total_Injuries)) <span class="sc">%&gt;%</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">15</span>)</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(top_injuries, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(Country, Total_Injuries), <span class="at">y =</span> Total_Injuries)) <span class="sc">+</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">fill =</span> <span class="st">"orange"</span>) <span class="sc">+</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add value labels at the end of each bar</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">format</span>(Total_Injuries, <span class="at">big.mark =</span> <span class="st">","</span>)), </span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>            <span class="at">hjust =</span> <span class="sc">-</span><span class="fl">0.2</span>, <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">fontface =</span> <span class="st">"bold"</span>, <span class="at">size =</span> <span class="fl">3.5</span>) <span class="sc">+</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>(<span class="at">clip =</span> <span class="st">"off"</span>) <span class="sc">+</span>  <span class="co"># Prevent clipping of labels</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="cf">function</span>(x) <span class="fu">c</span>(<span class="dv">0</span>, x[<span class="dv">2</span>] <span class="sc">*</span> <span class="fl">1.1</span>)) <span class="sc">+</span>  <span class="co"># Expand y-axis to make room for labels</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Top 15 Countries by Total Injuries (2012–2022)"</span>,</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Country"</span>, <span class="at">y =</span> <span class="st">"Total Injuries"</span>) <span class="sc">+</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.margin =</span> <span class="fu">margin</span>(<span class="fl">5.5</span>, <span class="dv">30</span>, <span class="fl">5.5</span>, <span class="fl">5.5</span>)  <span class="co"># Add right margin for labels</span></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="overall_files/figure-html/injuries-1.png" class="img-fluid figure-img" width="1152"></p>
<figcaption>Countries with Highest Terrorism-Related Injuries (2012-2022)</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="top-15-countries-by-total-incidents" class="level3 section-header">
<h3 class="section-header anchored" data-anchor-id="top-15-countries-by-total-incidents">2.3.3. Top 15 Countries by Total Incidents</h3>
<div class="description-box">
<p>The number of terrorist incidents provides a measure of the frequency of attacks, regardless of their scale. This visualization highlights countries experiencing the highest number of terrorism events during the study period.</p>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>top_incidents <span class="ot">&lt;-</span> combined_raw_df <span class="sc">%&gt;%</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Country) <span class="sc">%&gt;%</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Total_Incidents =</span> <span class="fu">sum</span>(Incidents, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Total_Incidents)) <span class="sc">%&gt;%</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">15</span>)</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(top_incidents, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(Country, Total_Incidents), <span class="at">y =</span> Total_Incidents)) <span class="sc">+</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">fill =</span> <span class="st">"steelblue"</span>) <span class="sc">+</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add value labels at the end of each bar</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">format</span>(Total_Incidents, <span class="at">big.mark =</span> <span class="st">","</span>)), </span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>            <span class="at">hjust =</span> <span class="sc">-</span><span class="fl">0.2</span>, <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">fontface =</span> <span class="st">"bold"</span>, <span class="at">size =</span> <span class="fl">3.5</span>) <span class="sc">+</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>(<span class="at">clip =</span> <span class="st">"off"</span>) <span class="sc">+</span>  <span class="co"># Prevent clipping of labels</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="cf">function</span>(x) <span class="fu">c</span>(<span class="dv">0</span>, x[<span class="dv">2</span>] <span class="sc">*</span> <span class="fl">1.1</span>)) <span class="sc">+</span>  <span class="co"># Expand y-axis to make room for labels</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Top 15 Countries by Total Incidents (2012–2022)"</span>,</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Country"</span>, <span class="at">y =</span> <span class="st">"Total Incidents"</span>) <span class="sc">+</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.margin =</span> <span class="fu">margin</span>(<span class="fl">5.5</span>, <span class="dv">30</span>, <span class="fl">5.5</span>, <span class="fl">5.5</span>)  <span class="co"># Add right margin for labels</span></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="overall_files/figure-html/incidents-1.png" class="img-fluid figure-img" width="1152"></p>
<figcaption>Countries with Highest Number of Terrorist Incidents (2012-2022)</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="top-15-countries-by-total-hostages" class="level3 section-header">
<h3 class="section-header anchored" data-anchor-id="top-15-countries-by-total-hostages">2.3.4. Top 15 Countries by Total Hostages</h3>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>top_hostages <span class="ot">&lt;-</span> combined_raw_df <span class="sc">%&gt;%</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Country) <span class="sc">%&gt;%</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Total_Hostages =</span> <span class="fu">sum</span>(Hostages, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Total_Hostages)) <span class="sc">%&gt;%</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">15</span>)</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(top_hostages, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(Country, Total_Hostages), <span class="at">y =</span> Total_Hostages)) <span class="sc">+</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">fill =</span> <span class="st">"purple"</span>) <span class="sc">+</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add value labels at the end of each bar</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">format</span>(Total_Hostages, <span class="at">big.mark =</span> <span class="st">","</span>)), </span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>            <span class="at">hjust =</span> <span class="sc">-</span><span class="fl">0.2</span>, <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">fontface =</span> <span class="st">"bold"</span>, <span class="at">size =</span> <span class="fl">3.5</span>) <span class="sc">+</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>(<span class="at">clip =</span> <span class="st">"off"</span>) <span class="sc">+</span>  <span class="co"># Prevent clipping of labels</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="cf">function</span>(x) <span class="fu">c</span>(<span class="dv">0</span>, x[<span class="dv">2</span>] <span class="sc">*</span> <span class="fl">1.1</span>)) <span class="sc">+</span>  <span class="co"># Expand y-axis to make room for labels</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Top 15 Countries by Total Hostages (2012–2022)"</span>,</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Country"</span>, <span class="at">y =</span> <span class="st">"Total Hostages Taken"</span>) <span class="sc">+</span></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.margin =</span> <span class="fu">margin</span>(<span class="fl">5.5</span>, <span class="dv">30</span>, <span class="fl">5.5</span>, <span class="fl">5.5</span>)  <span class="co"># Add right margin for labels</span></span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="overall_files/figure-html/hostages-1.png" class="img-fluid figure-img" width="1152"></p>
<figcaption>Countries with Highest Number of Hostages in Terrorist Incidents (2012-2022)</figcaption>
</figure>
</div>
</div>
</div>
<div class="insight-box">
<p><strong>Key Insights from Impact Analysis:</strong> <br> <br> • Fatalities: Iraq, Afghanistan, and Nigeria have suffered the highest number of terrorism-related deaths<br> • Injuries: Iraq and Afghanistan also lead in injuries, but Pakistan ranks higher in injuries than in fatalities<br> • Incidents: Iraq experiences the most terrorism incidents, followed by Afghanistan and Pakistan<br> • Hostages: Nigeria stands out with significantly more hostages than other countries, likely due to specific tactics used by terrorist groups operating there<br> • Different countries show different patterns of terrorism impact (e.g., some have high fatality-to-incident ratios while others show more incidents with fewer casualties)</p>
</div>
</section>
</section>
<section id="global-trends-over-time" class="level2 section-header">
<h2 class="section-header anchored" data-anchor-id="global-trends-over-time">2.4. Global Trends Over Time</h2>
<div class="description-box">
<p>This visualization tracks the global yearly trends in terrorism impact, showing how fatalities, injuries, and hostage situations have evolved over the decade. This provides a macro-level view of global terrorism patterns.</p>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>global_trend <span class="ot">&lt;-</span> combined_raw_df <span class="sc">%&gt;%</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Year) <span class="sc">%&gt;%</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Fatalities =</span> <span class="fu">sum</span>(Fatalities, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">Injuries =</span> <span class="fu">sum</span>(Injuries, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">Hostages =</span> <span class="fu">sum</span>(Hostages, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>global_trend_long <span class="ot">&lt;-</span> <span class="fu">pivot_longer</span>(global_trend, </span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">cols =</span> <span class="fu">c</span>(<span class="st">"Fatalities"</span>, <span class="st">"Injuries"</span>, <span class="st">"Hostages"</span>),</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">names_to =</span> <span class="st">"Type"</span>, <span class="at">values_to =</span> <span class="st">"Count"</span>)</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(global_trend_long, <span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> Count, <span class="at">color =</span> Type)) <span class="sc">+</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="fl">1.2</span>) <span class="sc">+</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Global Trends: Fatalities, Injuries, Hostages (2012–2022)"</span>,</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Year"</span>, <span class="at">y =</span> <span class="st">"Count"</span>, <span class="at">color =</span> <span class="st">"Type"</span>) <span class="sc">+</span></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0.
ℹ Please use `linewidth` instead.</code></pre>
</div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="overall_files/figure-html/global-trends-1.png" class="img-fluid figure-img" width="1152"></p>
<figcaption>Global Yearly Trends in Terrorism Impact (2012-2022)</figcaption>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"bottom"</span>,</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>)</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>List of 3
 $ legend.title   :List of 11
  ..$ family       : NULL
  ..$ face         : chr "bold"
  ..$ colour       : NULL
  ..$ size         : NULL
  ..$ hjust        : NULL
  ..$ vjust        : NULL
  ..$ angle        : NULL
  ..$ lineheight   : NULL
  ..$ margin       : NULL
  ..$ debug        : NULL
  ..$ inherit.blank: logi FALSE
  ..- attr(*, "class")= chr [1:2] "element_text" "element"
 $ legend.position: chr "bottom"
 $ plot.title     :List of 11
  ..$ family       : NULL
  ..$ face         : chr "bold"
  ..$ colour       : NULL
  ..$ size         : NULL
  ..$ hjust        : num 0.5
  ..$ vjust        : NULL
  ..$ angle        : NULL
  ..$ lineheight   : NULL
  ..$ margin       : NULL
  ..$ debug        : NULL
  ..$ inherit.blank: logi FALSE
  ..- attr(*, "class")= chr [1:2] "element_text" "element"
 - attr(*, "class")= chr [1:2] "theme" "gg"
 - attr(*, "complete")= logi FALSE
 - attr(*, "validate")= logi TRUE</code></pre>
</div>
</div>
<div class="insight-box">
<p><strong>Key Global Trends:</strong><br> <br> • The period around 2014-2015 shows a significant peak in both fatalities and injuries, corresponding to the rise of ISIS<br> • Since 2015, there has been a general downward trend in all three impact measures<br> • Hostage situations follow a different pattern than fatalities and injuries, with distinct peaks<br> • Recent years show some stabilization at lower levels compared to the mid-decade peak</p>
</div>
</section>
<section id="multi-dimensional-analysis" class="level2 section-header">
<h2 class="section-header anchored" data-anchor-id="multi-dimensional-analysis">2.5. Multi-Dimensional Analysis</h2>
<div class="description-box">
<p>This bubble chart provides a multi-dimensional view of terrorism impact, plotting fatalities against injuries while using bubble size to represent the average GTI score. This visualization helps identify countries that are disproportionately affected across different impact measures.</p>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>bubble_data <span class="ot">&lt;-</span> combined_raw_df <span class="sc">%&gt;%</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Country) <span class="sc">%&gt;%</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Fatalities =</span> <span class="fu">sum</span>(Fatalities, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">Injuries =</span> <span class="fu">sum</span>(Injuries, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">GTI =</span> <span class="fu">mean</span>(Score, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Fatalities <span class="sc">&gt;</span> <span class="dv">0</span> <span class="sc">&amp;</span> Injuries <span class="sc">&gt;</span> <span class="dv">0</span>)</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(bubble_data, <span class="fu">aes</span>(<span class="at">x =</span> Fatalities, <span class="at">y =</span> Injuries, <span class="at">size =</span> GTI, <span class="at">label =</span> Country)) <span class="sc">+</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.6</span>, <span class="at">color =</span> <span class="st">"darkblue"</span>) <span class="sc">+</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">check_overlap =</span> <span class="cn">TRUE</span>, <span class="at">size =</span> <span class="dv">3</span>, <span class="at">vjust =</span> <span class="fl">1.5</span>) <span class="sc">+</span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_size_continuous</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">10</span>)) <span class="sc">+</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Bubble Chart: Fatalities vs Injuries by Country"</span>,</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Total Fatalities"</span>, <span class="at">y =</span> <span class="st">"Total Injuries"</span>, <span class="at">size =</span> <span class="st">"Avg. GTI Score"</span>) <span class="sc">+</span></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="overall_files/figure-html/bubble-chart-1.png" class="img-fluid figure-img" width="1056"></p>
<figcaption>Multi-Dimensional Analysis of Terrorism Impact by Country (2012-2022)</figcaption>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"right"</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>List of 3
 $ legend.position: chr "right"
 $ plot.title     :List of 11
  ..$ family       : NULL
  ..$ face         : chr "bold"
  ..$ colour       : NULL
  ..$ size         : NULL
  ..$ hjust        : num 0.5
  ..$ vjust        : NULL
  ..$ angle        : NULL
  ..$ lineheight   : NULL
  ..$ margin       : NULL
  ..$ debug        : NULL
  ..$ inherit.blank: logi FALSE
  ..- attr(*, "class")= chr [1:2] "element_text" "element"
 $ plot.subtitle  :List of 11
  ..$ family       : NULL
  ..$ face         : NULL
  ..$ colour       : NULL
  ..$ size         : NULL
  ..$ hjust        : num 0.5
  ..$ vjust        : NULL
  ..$ angle        : NULL
  ..$ lineheight   : NULL
  ..$ margin       : NULL
  ..$ debug        : NULL
  ..$ inherit.blank: logi FALSE
  ..- attr(*, "class")= chr [1:2] "element_text" "element"
 - attr(*, "class")= chr [1:2] "theme" "gg"
 - attr(*, "complete")= logi FALSE
 - attr(*, "validate")= logi TRUE</code></pre>
</div>
</div>
<div class="insight-box">
<p><strong>Key Insights from Multi-Dimensional Analysis:</strong><br> <br> • Iraq and Afghanistan stand as extreme outliers, with exceptionally high values across all three dimensions<br> • Most countries cluster in the lower ranges for both fatalities and injuries<br> • Some countries show disproportionate ratios between fatalities and injuries<br> • The relationship between GTI score and casualty figures is generally consistent, with higher casualties correlating with higher GTI scores<br> • A few countries have relatively high GTI scores despite moderate casualty figures, suggesting other factors (like property damage or psychological impact) influence their GTI ranking</p>
</div>
</section>
</section>
<section id="data-pre-processing" class="level1 section-header">
<h1 class="section-header">3. Data Pre-Processing</h1>
<div class="description-box">
<p><strong>Key Metric: Fatality Rate</strong><br><br> • <strong>Definition:</strong> Average deaths per attack = Fatalities ÷ Incidents.<br> • <strong>Why it matters:</strong> Normalizes for attack frequency so you can compare how deadly incidents are across countries and over time.<br> • <strong>Interpretation:</strong> An increasing rate signals more severe attacks or reduced survivability; a declining rate suggests less-lethal tactics or improved emergency response.</p>
</div>
<section id="data-ingestion" class="level2 subsection-header">
<h2 class="subsection-header anchored" data-anchor-id="data-ingestion">3.1. Data Ingestion</h2>
<div class="description-box">
<p><strong>Data Ingestion:</strong> Load the raw “Combined raw” sheet into R using <code>read_excel</code>, preserving the original structure so we can inspect and verify the incoming data before any transformations.</p>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>data_path <span class="ot">&lt;-</span> <span class="st">"data/Global Terrorism Index 2023.xlsx"</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>raw_df <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(data_path, <span class="at">sheet =</span> <span class="st">"Combined raw"</span>)</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(raw_df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 9
  iso3c Country      Rank Score Incidents Fatalities Injuries Hostages  Year
  &lt;chr&gt; &lt;chr&gt;       &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;      &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt;
1 IRQ   Iraq            1  9.60      1288       2086     5050       16  2012
2 PAK   Pakistan        2  9.15       638       1322     2297      160  2012
3 AFG   Afghanistan     3  9.13       507       1511     2612       67  2012
4 SYR   Syria           4  8.24       168       1014     1833       71  2012
5 YEM   Yemen           5  8.10       219        651      798      121  2012
6 NGA   Nigeria         6  8.10       212        767      496        9  2012</code></pre>
</div>
</div>
<div class="insight-box">
<p><strong>Initial Data Snapshot:</strong><br><br> - The raw “Combined raw” sheet contains 9 columns: <code>iso3c</code>, <code>Country</code>, <code>Rank</code>, <code>Score</code>, <code>Incidents</code>, <code>Fatalities</code>, <code>Injuries</code>, <code>Hostages</code>, and <code>Year</code>.<br> - The first six rows for 2012 list Iraq, Pakistan, Afghanistan, Syria, Yemen, and Nigeria—showing their 2012 GTI rank, score, and casualty figures.<br> - Confirms successful ingestion and expected structure before any cleaning or transformation.</p>
</div>
</section>
<section id="cleaning-normalization" class="level2 subsection-header">
<h2 class="subsection-header anchored" data-anchor-id="cleaning-normalization">3.2. Cleaning &amp; Normalization</h2>
<div class="description-box">
<p><strong>Cleaning &amp; Normalization:</strong> Standardize column names to snake_case, remove empty or “Total” rows, trim whitespace in <code>country</code>, convert all metric columns (<code>incidents</code>, <code>fatalities</code>, <code>injuries</code>, <code>hostages</code>, <code>score</code>) to numeric types, replace any missing values with zeros, and drop exact duplicate rows to ensure a consistent dataset.</p>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'janitor'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:stats':

    chisq.test, fisher.test</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>clean_df <span class="ot">&lt;-</span> raw_df <span class="sc">%&gt;%</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">clean_names</span>() <span class="sc">%&gt;%</span>                                 <span class="co"># snake_case column names</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>    <span class="sc">!</span><span class="fu">is.na</span>(country),</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">!=</span> <span class="st">""</span>,</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>    <span class="sc">!</span><span class="fu">str_detect</span>(country, <span class="fu">regex</span>(<span class="st">"total|all"</span>, <span class="at">ignore_case =</span> <span class="cn">TRUE</span>))</span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">country    =</span> <span class="fu">str_squish</span>(country),               <span class="co"># trim extra spaces</span></span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">year       =</span> <span class="fu">as.integer</span>(year),</span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">incidents  =</span> <span class="fu">as.numeric</span>(incidents),</span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">fatalities =</span> <span class="fu">as.numeric</span>(fatalities),</span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">injuries   =</span> <span class="fu">as.numeric</span>(injuries),</span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">hostages   =</span> <span class="fu">as.numeric</span>(hostages),</span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">score      =</span> <span class="fu">as.numeric</span>(score)</span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">replace_na</span>(<span class="fu">list</span>(                                  <span class="co"># missing counts → 0</span></span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">incidents  =</span> <span class="dv">0</span>,</span>
<span id="cb19-21"><a href="#cb19-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">fatalities =</span> <span class="dv">0</span>,</span>
<span id="cb19-22"><a href="#cb19-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">injuries   =</span> <span class="dv">0</span>,</span>
<span id="cb19-23"><a href="#cb19-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">hostages   =</span> <span class="dv">0</span></span>
<span id="cb19-24"><a href="#cb19-24" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">%&gt;%</span></span>
<span id="cb19-25"><a href="#cb19-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(country, year, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>)         <span class="co"># drop exact duplicates</span></span>
<span id="cb19-26"><a href="#cb19-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-27"><a href="#cb19-27" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(clean_df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 9
  iso3c country      rank score incidents fatalities injuries hostages  year
  &lt;chr&gt; &lt;chr&gt;       &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;      &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt; &lt;int&gt;
1 IRQ   Iraq            1  9.60      1288       2086     5050       16  2012
2 PAK   Pakistan        2  9.15       638       1322     2297      160  2012
3 AFG   Afghanistan     3  9.13       507       1511     2612       67  2012
4 SYR   Syria           4  8.24       168       1014     1833       71  2012
5 YEM   Yemen           5  8.10       219        651      798      121  2012
6 NGA   Nigeria         6  8.10       212        767      496        9  2012</code></pre>
</div>
</div>
</section>
<section id="post-cleaning-validation" class="level2 subsection-header">
<h2 class="subsection-header anchored" data-anchor-id="post-cleaning-validation">3.3. Post-cleaning Validation</h2>
<div class="description-box">
<p><strong>Validate Cleaning Results:</strong> Verify that column types, row counts, and missing‐value replacements are as expected. We compare before/after dimensions, check for duplicates, and summarize any remaining <code>NA</code>s.</p>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Compare dimensions before &amp; after</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Raw rows:"</span>, <span class="fu">nrow</span>(raw_df), <span class="st">"→ Clean rows:"</span>, <span class="fu">nrow</span>(clean_df), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Raw rows: 1793 → Clean rows: 1793 </code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Raw cols:"</span>, <span class="fu">ncol</span>(raw_df), <span class="st">"→ Clean cols:"</span>, <span class="fu">ncol</span>(clean_df), <span class="st">"</span><span class="sc">\n\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Raw cols: 9 → Clean cols: 9 </code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Check for any duplicate rows remaining</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Duplicates in clean_df:"</span>, <span class="fu">sum</span>(<span class="fu">duplicated</span>(clean_df)), <span class="st">"</span><span class="sc">\n\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Duplicates in clean_df: 0 </code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Summarize NA counts by column</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>na_summary <span class="ot">&lt;-</span> clean_df <span class="sc">%&gt;%</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">across</span>(<span class="fu">everything</span>(), <span class="sc">~</span> <span class="fu">sum</span>(<span class="fu">is.na</span>(.))))</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(na_summary)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 9
  iso3c country  rank score incidents fatalities injuries hostages  year
  &lt;int&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt;     &lt;int&gt;      &lt;int&gt;    &lt;int&gt;    &lt;int&gt; &lt;int&gt;
1     0       0     0     0         0          0        0        0     0</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. Glimpse the cleaned structure</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(clean_df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 1,793
Columns: 9
$ iso3c      &lt;chr&gt; "IRQ", "PAK", "AFG", "SYR", "YEM", "NGA", "SOM", "IND", "TH…
$ country    &lt;chr&gt; "Iraq", "Pakistan", "Afghanistan", "Syria", "Yemen", "Niger…
$ rank       &lt;dbl&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, …
$ score      &lt;dbl&gt; 9.599967, 9.152620, 9.134265, 8.238079, 8.098513, 8.098342,…
$ incidents  &lt;dbl&gt; 1288, 638, 507, 168, 219, 212, 166, 219, 199, 219, 157, 119…
$ fatalities &lt;dbl&gt; 2086, 1322, 1511, 1014, 651, 767, 446, 150, 184, 157, 188, …
$ injuries   &lt;dbl&gt; 5050, 2297, 2612, 1833, 798, 496, 427, 256, 493, 309, 502, …
$ hostages   &lt;dbl&gt; 16, 160, 67, 71, 121, 9, 1, 41, 0, 3, 89, 21, 29, 1, 6, 3, …
$ year       &lt;int&gt; 2012, 2012, 2012, 2012, 2012, 2012, 2012, 2012, 2012, 2012,…</code></pre>
</div>
</div>
<div class="insight-box">
<p><strong>Post-Cleaning Validation:</strong><br><br> • <strong>Row &amp; Column Consistency:</strong> Retained all 1,793 rows and 9 columns—no unintended data loss.<br><br>
• <strong>Duplicates Removed:</strong> Zero duplicate entries, ensuring each country–year is unique.<br><br>
• <strong>No Missing Values:</strong> All <code>incidents</code>, <code>fatalities</code>, <code>injuries</code>, and <code>hostages</code> fields now have zero NAs.<br><br>
• <strong>Correct Data Types:</strong> <code>year</code> is integer and all metric columns are numeric, ready for reliable aggregation and analysis.</p>
</div>
</section>
<section id="filtering-period-selection" class="level2 subsection-header">
<h2 class="subsection-header anchored" data-anchor-id="filtering-period-selection">3.4. Filtering &amp; Period Selection</h2>
<div class="description-box">
<p><strong>Filtering &amp; Period Selection:</strong> Restrict the cleaned dataset to the years 2012–2022 (inclusive), so that all subsequent analysis focuses on our target time window.</p>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Keep only 2012 through 2022</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>combined_raw_df <span class="ot">&lt;-</span> clean_df <span class="sc">%&gt;%</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">&gt;=</span> <span class="dv">2012</span>, year <span class="sc">&lt;=</span> <span class="dv">2022</span>)</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Verify the operation</span></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Year range after filter:"</span>, <span class="fu">range</span>(combined_raw_df<span class="sc">$</span>year), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Year range after filter: 2012 2022 </code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(combined_raw_df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 9
  iso3c country      rank score incidents fatalities injuries hostages  year
  &lt;chr&gt; &lt;chr&gt;       &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;      &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt; &lt;int&gt;
1 IRQ   Iraq            1  9.60      1288       2086     5050       16  2012
2 PAK   Pakistan        2  9.15       638       1322     2297      160  2012
3 AFG   Afghanistan     3  9.13       507       1511     2612       67  2012
4 SYR   Syria           4  8.24       168       1014     1833       71  2012
5 YEM   Yemen           5  8.10       219        651      798      121  2012
6 NGA   Nigeria         6  8.10       212        767      496        9  2012</code></pre>
</div>
</div>
<div class="insight-box">
<p><strong>Period Selection Validation:</strong><br><br> • Dataset now spans only the years <strong>2012 through 2022</strong> as intended.<br> • Confirms our analysis will focus on a consistent 11-year window.<br> • Underlying record count remains unchanged, preserving full coverage within this period.</p>
</div>
</section>
<section id="selecting-top-8-countries-by-total-fatalities" class="level2 subsection-header">
<h2 class="subsection-header anchored" data-anchor-id="selecting-top-8-countries-by-total-fatalities">3.5. Selecting Top 8 Countries by Total Fatalities</h2>
<div class="description-box">
<p>Identify the eight countries with the highest cumulative fatalities and keep only their records.</p>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>top8_countries <span class="ot">&lt;-</span> combined_raw_df <span class="sc">%&gt;%</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(country) <span class="sc">%&gt;%</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">total_fatalities =</span> <span class="fu">sum</span>(fatalities, <span class="at">na.rm=</span><span class="cn">TRUE</span>), <span class="at">.groups=</span><span class="st">"drop"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(total_fatalities, <span class="at">n=</span><span class="dv">8</span>) <span class="sc">%&gt;%</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(country)</span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>filtered_df <span class="ot">&lt;-</span> combined_raw_df <span class="sc">%&gt;%</span></span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(country <span class="sc">%in%</span> top8_countries)</span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a>top8_countries</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Iraq"         "Afghanistan"  "Nigeria"      "Pakistan"     "Somalia"     
[6] "Syria"        "Burkina Faso" "Mali"        </code></pre>
</div>
</div>
<div class="insight-box">
<p><strong>Top 8 Countries by Total Fatalities (2012–2022):</strong><br>
- <strong>Iraq</strong>, <strong>Afghanistan</strong>, <strong>Nigeria</strong>, <strong>Syria</strong>, and <strong>Pakistan</strong> consistently record the highest terrorism-related death tolls each year (<a href="https://www.visionofhumanity.org/maps/global-terrorism-index/">IEP GTI map</a> :contentReference<span data-index="0">oaicite:0</span>).<br>
- <strong>Somalia</strong> remains among the worst-hit due to the persistent al-Shabaab insurgency and large-scale attacks (<a href="https://apnews.com/article/162c899b2ed71c7be1724eb03ece772b">UN experts report</a> :contentReference<span data-index="1">oaicite:1</span>).<br>
- <strong>Burkina Faso</strong> and <strong>Mali</strong> have surged into the top eight as jihadist violence in the Sahel intensifies—this region now accounts for over 40 % of global terrorism fatalities (<a href="https://www.economicsandpeace.org/wp-content/uploads/2024/02/GTI-2024-web-290224.pdf">GTI 2024 Briefing PDF</a> :contentReference<span data-index="2">oaicite:2</span>).</p>
</div>
</section>
<section id="summarise-annual-fatalities" class="level2 subsection-header">
<h2 class="subsection-header anchored" data-anchor-id="summarise-annual-fatalities">3.6. Summarise Annual Fatalities</h2>
<div class="description-box">
<p><strong>Summarise Annual Fatalities:</strong> Aggregate total fatalities by country and year for our selected top-8 countries, convert counts into “thousands,” and print the full 2012–2022 series.</p>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>annual_fat_df <span class="ot">&lt;-</span> filtered_df <span class="sc">%&gt;%</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(country, year) <span class="sc">%&gt;%</span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">annual_fatalities =</span> <span class="fu">sum</span>(fatalities, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">fatalities_k =</span> annual_fatalities <span class="sc">/</span> <span class="dv">1000</span></span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Print all 88 rows to verify</span></span>
<span id="cb37-14"><a href="#cb37-14" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(annual_fat_df, <span class="at">n =</span> <span class="fu">nrow</span>(annual_fat_df))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 88 × 4
   country       year annual_fatalities fatalities_k
   &lt;chr&gt;        &lt;int&gt;             &lt;dbl&gt;        &lt;dbl&gt;
 1 Afghanistan   2012              1511        1.51 
 2 Afghanistan   2013               923        0.923
 3 Afghanistan   2014              1143        1.14 
 4 Afghanistan   2015              1008        1.01 
 5 Afghanistan   2016               643        0.643
 6 Afghanistan   2017              1256        1.26 
 7 Afghanistan   2018              1624        1.62 
 8 Afghanistan   2019              1194        1.19 
 9 Afghanistan   2020              1292        1.29 
10 Afghanistan   2021              1499        1.50 
11 Afghanistan   2022               633        0.633
12 Burkina Faso  2012                 0        0    
13 Burkina Faso  2013                 0        0    
14 Burkina Faso  2014                 0        0    
15 Burkina Faso  2015                 4        0.004
16 Burkina Faso  2016                53        0.053
17 Burkina Faso  2017                72        0.072
18 Burkina Faso  2018               144        0.144
19 Burkina Faso  2019               682        0.682
20 Burkina Faso  2020               666        0.666
21 Burkina Faso  2021               759        0.759
22 Burkina Faso  2022              1135        1.14 
23 Iraq          2012              2086        2.09 
24 Iraq          2013              3980        3.98 
25 Iraq          2014              3206        3.21 
26 Iraq          2015              2974        2.97 
27 Iraq          2016              4514        4.51 
28 Iraq          2017              1732        1.73 
29 Iraq          2018              1083        1.08 
30 Iraq          2019               533        0.533
31 Iraq          2020               464        0.464
32 Iraq          2021               540        0.54 
33 Iraq          2022               174        0.174
34 Mali          2012                45        0.045
35 Mali          2013                45        0.045
36 Mali          2014                36        0.036
37 Mali          2015               181        0.181
38 Mali          2016               144        0.144
39 Mali          2017               296        0.296
40 Mali          2018               340        0.34 
41 Mali          2019               389        0.389
42 Mali          2020               404        0.404
43 Mali          2021               604        0.604
44 Mali          2022               944        0.944
45 Nigeria       2012               767        0.767
46 Nigeria       2013               931        0.931
47 Nigeria       2014              2101        2.10 
48 Nigeria       2015              2003        2.00 
49 Nigeria       2016               518        0.518
50 Nigeria       2017               794        0.794
51 Nigeria       2018               642        0.642
52 Nigeria       2019               688        0.688
53 Nigeria       2020               865        0.865
54 Nigeria       2021               497        0.497
55 Nigeria       2022               385        0.385
56 Pakistan      2012              1322        1.32 
57 Pakistan      2013              1503        1.50 
58 Pakistan      2014               996        0.996
59 Pakistan      2015               658        0.658
60 Pakistan      2016               631        0.631
61 Pakistan      2017               632        0.632
62 Pakistan      2018               502        0.502
63 Pakistan      2019               250        0.25 
64 Pakistan      2020               263        0.263
65 Pakistan      2021               292        0.292
66 Pakistan      2022               643        0.643
67 Somalia       2012               446        0.446
68 Somalia       2013               264        0.264
69 Somalia       2014               256        0.256
70 Somalia       2015               335        0.335
71 Somalia       2016               760        0.76 
72 Somalia       2017              1535        1.54 
73 Somalia       2018               833        0.833
74 Somalia       2019               693        0.693
75 Somalia       2020               671        0.671
76 Somalia       2021               661        0.661
77 Somalia       2022               755        0.755
78 Syria         2012              1014        1.01 
79 Syria         2013               907        0.907
80 Syria         2014               545        0.545
81 Syria         2015               226        0.226
82 Syria         2016               531        0.531
83 Syria         2017               376        0.376
84 Syria         2018               323        0.323
85 Syria         2019               368        0.368
86 Syria         2020               746        0.746
87 Syria         2021               494        0.494
88 Syria         2022               447        0.447</code></pre>
</div>
</div>
<div class="insight-box">
<p><strong>Fatality Rate Calculation:</strong><br>
• Groups the top-8 countries by <code>country</code> and <code>year</code>.<br>
• Sums <code>total_fatalities</code> and <code>total_incidents</code>.<br>
• Drops years with zero incidents to avoid undefined rates.<br>
• Computes <code>fatality_rate = total_fatalities / total_incidents</code>.<br>
• Prints all 88 rows (2012–2022) so you can verify every country–year rate before plotting.</p>
</div>
</section>
</section>
<section id="visualizing-annual-fatalities" class="level1 section-header">
<h1 class="section-header">4. Visualizing Annual Fatalities</h1>
<div class="description-box">
<p><strong>Visualizing Annual Fatalities:</strong> A stacked‐area chart showing total yearly fatalities (in thousands) for our top 8 countries over 2012–2022.</p>
</div>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>Warning in geom_vline(data = tibble(x = 2020), aes(xintercept = x), inherit.aes
= FALSE, : Ignoring unknown parameters: `inherit.aes`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in geom_vline(data = events, aes(xintercept = year), inherit.aes =
FALSE, : Ignoring unknown parameters: `inherit.aes`</code></pre>
</div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="overall_files/figure-html/plot-isis-with-2020-rebound-fixed-1.png" class="img-fluid figure-img" width="1152"></p>
<figcaption>Top 8 Countries: Terrorism Fatalities (2012–2022) – ISIS Surge &amp; Decline plus 2020 Rebound (Fixed)</figcaption>
</figure>
</div>
</div>
</div>
<div class="insight-box">
<p>Key Insights from Annual Fatalities (2012–2022):</p>
<p>Global Peak &amp; Major Surges: Total terrorism deaths hit their highest point around 2013, driven largely by ISIS’s rise (declared caliphate in June 2014) and the Ghouta chemical attack (Aug 2013). A secondary surge in 2016 coincides with the Battle of Mosul.</p>
<p>Steady Decline Post-2016: After Mosul, overall fatalities fell sharply through 2017–2019, culminating in the killing of ISIS leader Baghdadi in October 2019.</p>
<p>Recent Uptick &amp; Shifts: From 2020 onward fatalities stabilized at lower levels, with a mild rebound in 2021 as the Taliban recaptured Kabul.</p>
<p>Country Contributions: Iraq and Nigeria remain the largest contributors throughout, followed by Afghanistan and Somalia, while the Sahel states (Burkina Faso, Mali) gradually account for a bigger share in later years.</p>
</div>
</section>
<section id="conclusion" class="level1 section-header">
<h1 class="section-header">5. Conclusion</h1>
<div class="description-box">
<p>This analysis has examined the Global Terrorism Index data from multiple perspectives, revealing important patterns in how terrorism has impacted different countries over the past decade. The visualizations highlight both the geographic concentration of terrorism and its evolving nature over time. <br><br> Several key findings emerge:<br><br></p>
<ul>
<li><p>Terrorism impact is highly concentrated in a small number of countries, particularly in the Middle East, South Asia, and parts of Africa<br></p></li>
<li><p>The overall global trend shows a peak in terrorism impact around 2013–2016, followed by a general decline<br></p></li>
<li><p>Different countries show distinct patterns of improvement or deterioration in their terrorism situation<br></p></li>
<li><p>The various dimensions of terrorism impact (fatalities, injuries, incidents, hostages) affect countries in different proportions<br></p></li>
<li><p>The severity classification framework provides valuable context for interpreting GTI scores<br><br> These insights can inform policy discussions about international security cooperation, humanitarian assistance, and targeted counter-terrorism efforts in the most affected regions.</p></li>
</ul>
</div>
</section>
<section id="additional-information" class="level1 section-header">
<h1 class="section-header">6. Additional Information</h1>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'plotly'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:ggplot2':

    last_plot</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:stats':

    filter</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:graphics':

    layout</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'purrr'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:scales':

    discard</code></pre>
</div>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-cc38ad7250dc3149c767" style="width:100%;height:433px;"></div>
<script type="application/json" data-for="htmlwidget-cc38ad7250dc3149c767">{"x":{"visdat":{"27943f7b7eb8":["function () ","plotlyVisDat"],"279461532afc":["function () ","data"],"27944244599":["function () ","data"]},"cur_data":"27944244599","attrs":{"27943f7b7eb8":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":2012,"y":0,"xend":2012,"yend":10.2636,"type":"scatter","mode":"lines","line":{"dash":"dot","color":"gray80","width":0.5},"showlegend":false,"hoverinfo":"none","inherit":true},"27943f7b7eb8.1":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":2013,"y":0,"xend":2013,"yend":10.2636,"type":"scatter","mode":"lines","line":{"dash":"dot","color":"gray80","width":0.5},"showlegend":false,"hoverinfo":"none","inherit":true},"27943f7b7eb8.2":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":2014,"y":0,"xend":2014,"yend":10.2636,"type":"scatter","mode":"lines","line":{"dash":"dot","color":"gray80","width":0.5},"showlegend":false,"hoverinfo":"none","inherit":true},"27943f7b7eb8.3":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":2015,"y":0,"xend":2015,"yend":10.2636,"type":"scatter","mode":"lines","line":{"dash":"dot","color":"gray80","width":0.5},"showlegend":false,"hoverinfo":"none","inherit":true},"27943f7b7eb8.4":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":2016,"y":0,"xend":2016,"yend":10.2636,"type":"scatter","mode":"lines","line":{"dash":"dot","color":"gray80","width":0.5},"showlegend":false,"hoverinfo":"none","inherit":true},"27943f7b7eb8.5":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":2017,"y":0,"xend":2017,"yend":10.2636,"type":"scatter","mode":"lines","line":{"dash":"dot","color":"gray80","width":0.5},"showlegend":false,"hoverinfo":"none","inherit":true},"27943f7b7eb8.6":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":2018,"y":0,"xend":2018,"yend":10.2636,"type":"scatter","mode":"lines","line":{"dash":"dot","color":"gray80","width":0.5},"showlegend":false,"hoverinfo":"none","inherit":true},"27943f7b7eb8.7":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":2019,"y":0,"xend":2019,"yend":10.2636,"type":"scatter","mode":"lines","line":{"dash":"dot","color":"gray80","width":0.5},"showlegend":false,"hoverinfo":"none","inherit":true},"27943f7b7eb8.8":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":2020,"y":0,"xend":2020,"yend":10.2636,"type":"scatter","mode":"lines","line":{"dash":"dot","color":"gray80","width":0.5},"showlegend":false,"hoverinfo":"none","inherit":true},"27943f7b7eb8.9":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":2021,"y":0,"xend":2021,"yend":10.2636,"type":"scatter","mode":"lines","line":{"dash":"dot","color":"gray80","width":0.5},"showlegend":false,"hoverinfo":"none","inherit":true},"27943f7b7eb8.10":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":2022,"y":0,"xend":2022,"yend":10.2636,"type":"scatter","mode":"lines","line":{"dash":"dot","color":"gray80","width":0.5},"showlegend":false,"hoverinfo":"none","inherit":true},"27943f7b7eb8.11":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":[2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022],"y":[2.0859999999999999,3.98,3.206,2.9740000000000002,4.5140000000000002,1.732,1.083,0.53300000000000003,0.46400000000000002,0.54000000000000004,0.17399999999999999],"name":"Iraq","type":"scatter","mode":"none","stackgroup":"one","fillcolor":"#E69F00","hoverinfo":"none","inherit":true},"27943f7b7eb8.12":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":[2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022],"y":[1.5109999999999999,0.92300000000000004,1.143,1.008,0.64300000000000002,1.256,1.6240000000000001,1.194,1.292,1.4990000000000001,0.63300000000000001],"name":"Afghanistan","type":"scatter","mode":"none","stackgroup":"one","fillcolor":"#56B4E9","hoverinfo":"none","inherit":true},"27943f7b7eb8.13":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":[2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022],"y":[0.76700000000000002,0.93100000000000005,2.101,2.0030000000000001,0.51800000000000002,0.79400000000000004,0.64200000000000002,0.68799999999999994,0.86499999999999999,0.497,0.38500000000000001],"name":"Nigeria","type":"scatter","mode":"none","stackgroup":"one","fillcolor":"#009E73","hoverinfo":"none","inherit":true},"27943f7b7eb8.14":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":[2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022],"y":[1.3220000000000001,1.5029999999999999,0.996,0.65800000000000003,0.63100000000000001,0.63200000000000001,0.502,0.25,0.26300000000000001,0.29199999999999998,0.64300000000000002],"name":"Pakistan","type":"scatter","mode":"none","stackgroup":"one","fillcolor":"#F0E442","hoverinfo":"none","inherit":true},"27943f7b7eb8.15":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":[2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022],"y":[0.44600000000000001,0.26400000000000001,0.25600000000000001,0.33500000000000002,0.76000000000000001,1.5349999999999999,0.83299999999999996,0.69299999999999995,0.67100000000000004,0.66100000000000003,0.755],"name":"Somalia","type":"scatter","mode":"none","stackgroup":"one","fillcolor":"#0072B2","hoverinfo":"none","inherit":true},"27943f7b7eb8.16":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":[2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022],"y":[1.014,0.90700000000000003,0.54500000000000004,0.22600000000000001,0.53100000000000003,0.376,0.32300000000000001,0.36799999999999999,0.746,0.49399999999999999,0.44700000000000001],"name":"Syria","type":"scatter","mode":"none","stackgroup":"one","fillcolor":"#999999","hoverinfo":"none","inherit":true},"27943f7b7eb8.17":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":[2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022],"y":[0,0,0,0.0040000000000000001,0.052999999999999999,0.071999999999999995,0.14399999999999999,0.68200000000000005,0.66600000000000004,0.75900000000000001,1.135],"name":"Burkina Faso","type":"scatter","mode":"none","stackgroup":"one","fillcolor":"#D55E00","hoverinfo":"none","inherit":true},"27943f7b7eb8.18":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":[2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022],"y":[0.044999999999999998,0.044999999999999998,0.035999999999999997,0.18099999999999999,0.14399999999999999,0.29599999999999999,0.34000000000000002,0.38900000000000001,0.40400000000000003,0.60399999999999998,0.94399999999999995],"name":"Mali","type":"scatter","mode":"none","stackgroup":"one","fillcolor":"#CC79A7","hoverinfo":"none","inherit":true},"279461532afc":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"name":"Global total","type":"scatter","mode":"lines","line":{"color":"black","width":2},"hoverinfo":"none","inherit":true},"27944244599":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":10.2636,"type":"scatter","mode":"markers","marker":{"size":0},"hoverinfo":"text","text":{},"hoverlabel":{"align":"left","font":{"size":10}},"showlegend":false,"inherit":true}},"layout":{"margin":{"b":80,"l":60,"t":25,"r":10},"title":{"text":"Top 8 Countries: Terrorism Fatalities (2012–2022)","x":0.5},"xaxis":{"domain":[0,1],"automargin":true,"title":"Year","tickmode":"array","tickvals":[2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022]},"yaxis":{"domain":[0,1],"automargin":true,"title":"Fatalities (thousands)","range":[0,10.69125]},"legend":{"orientation":"h","x":0.10000000000000001,"y":-0.20000000000000001},"hovermode":"x unified","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":[2012,2012],"y":[0,10.2636],"type":"scatter","mode":"lines","line":{"color":"gray80","dash":"dot","width":0.5},"showlegend":false,"hoverinfo":["none","none"],"marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[2013,2013],"y":[0,10.2636],"type":"scatter","mode":"lines","line":{"color":"gray80","dash":"dot","width":0.5},"showlegend":false,"hoverinfo":["none","none"],"marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[2014,2014],"y":[0,10.2636],"type":"scatter","mode":"lines","line":{"color":"gray80","dash":"dot","width":0.5},"showlegend":false,"hoverinfo":["none","none"],"marker":{"color":"rgba(44,160,44,1)","line":{"color":"rgba(44,160,44,1)"}},"error_y":{"color":"rgba(44,160,44,1)"},"error_x":{"color":"rgba(44,160,44,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[2015,2015],"y":[0,10.2636],"type":"scatter","mode":"lines","line":{"color":"gray80","dash":"dot","width":0.5},"showlegend":false,"hoverinfo":["none","none"],"marker":{"color":"rgba(214,39,40,1)","line":{"color":"rgba(214,39,40,1)"}},"error_y":{"color":"rgba(214,39,40,1)"},"error_x":{"color":"rgba(214,39,40,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[2016,2016],"y":[0,10.2636],"type":"scatter","mode":"lines","line":{"color":"gray80","dash":"dot","width":0.5},"showlegend":false,"hoverinfo":["none","none"],"marker":{"color":"rgba(148,103,189,1)","line":{"color":"rgba(148,103,189,1)"}},"error_y":{"color":"rgba(148,103,189,1)"},"error_x":{"color":"rgba(148,103,189,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[2017,2017],"y":[0,10.2636],"type":"scatter","mode":"lines","line":{"color":"gray80","dash":"dot","width":0.5},"showlegend":false,"hoverinfo":["none","none"],"marker":{"color":"rgba(140,86,75,1)","line":{"color":"rgba(140,86,75,1)"}},"error_y":{"color":"rgba(140,86,75,1)"},"error_x":{"color":"rgba(140,86,75,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[2018,2018],"y":[0,10.2636],"type":"scatter","mode":"lines","line":{"color":"gray80","dash":"dot","width":0.5},"showlegend":false,"hoverinfo":["none","none"],"marker":{"color":"rgba(227,119,194,1)","line":{"color":"rgba(227,119,194,1)"}},"error_y":{"color":"rgba(227,119,194,1)"},"error_x":{"color":"rgba(227,119,194,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[2019,2019],"y":[0,10.2636],"type":"scatter","mode":"lines","line":{"color":"gray80","dash":"dot","width":0.5},"showlegend":false,"hoverinfo":["none","none"],"marker":{"color":"rgba(127,127,127,1)","line":{"color":"rgba(127,127,127,1)"}},"error_y":{"color":"rgba(127,127,127,1)"},"error_x":{"color":"rgba(127,127,127,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[2020,2020],"y":[0,10.2636],"type":"scatter","mode":"lines","line":{"color":"gray80","dash":"dot","width":0.5},"showlegend":false,"hoverinfo":["none","none"],"marker":{"color":"rgba(188,189,34,1)","line":{"color":"rgba(188,189,34,1)"}},"error_y":{"color":"rgba(188,189,34,1)"},"error_x":{"color":"rgba(188,189,34,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[2021,2021],"y":[0,10.2636],"type":"scatter","mode":"lines","line":{"color":"gray80","dash":"dot","width":0.5},"showlegend":false,"hoverinfo":["none","none"],"marker":{"color":"rgba(23,190,207,1)","line":{"color":"rgba(23,190,207,1)"}},"error_y":{"color":"rgba(23,190,207,1)"},"error_x":{"color":"rgba(23,190,207,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[2022,2022],"y":[0,10.2636],"type":"scatter","mode":"lines","line":{"color":"gray80","dash":"dot","width":0.5},"showlegend":false,"hoverinfo":["none","none"],"marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022],"y":[2.0859999999999999,3.98,3.206,2.9740000000000002,4.5140000000000002,1.732,1.083,0.53300000000000003,0.46400000000000002,0.54000000000000004,0.17399999999999999],"name":"Iraq","type":"scatter","mode":"none","stackgroup":"one","fillcolor":"#E69F00","hoverinfo":["none","none","none","none","none","none","none","none","none","none","none"],"marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"line":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022],"y":[1.5109999999999999,0.92300000000000004,1.143,1.008,0.64300000000000002,1.256,1.6240000000000001,1.194,1.292,1.4990000000000001,0.63300000000000001],"name":"Afghanistan","type":"scatter","mode":"none","stackgroup":"one","fillcolor":"#56B4E9","hoverinfo":["none","none","none","none","none","none","none","none","none","none","none"],"marker":{"color":"rgba(44,160,44,1)","line":{"color":"rgba(44,160,44,1)"}},"error_y":{"color":"rgba(44,160,44,1)"},"error_x":{"color":"rgba(44,160,44,1)"},"line":{"color":"rgba(44,160,44,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022],"y":[0.76700000000000002,0.93100000000000005,2.101,2.0030000000000001,0.51800000000000002,0.79400000000000004,0.64200000000000002,0.68799999999999994,0.86499999999999999,0.497,0.38500000000000001],"name":"Nigeria","type":"scatter","mode":"none","stackgroup":"one","fillcolor":"#009E73","hoverinfo":["none","none","none","none","none","none","none","none","none","none","none"],"marker":{"color":"rgba(214,39,40,1)","line":{"color":"rgba(214,39,40,1)"}},"error_y":{"color":"rgba(214,39,40,1)"},"error_x":{"color":"rgba(214,39,40,1)"},"line":{"color":"rgba(214,39,40,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022],"y":[1.3220000000000001,1.5029999999999999,0.996,0.65800000000000003,0.63100000000000001,0.63200000000000001,0.502,0.25,0.26300000000000001,0.29199999999999998,0.64300000000000002],"name":"Pakistan","type":"scatter","mode":"none","stackgroup":"one","fillcolor":"#F0E442","hoverinfo":["none","none","none","none","none","none","none","none","none","none","none"],"marker":{"color":"rgba(148,103,189,1)","line":{"color":"rgba(148,103,189,1)"}},"error_y":{"color":"rgba(148,103,189,1)"},"error_x":{"color":"rgba(148,103,189,1)"},"line":{"color":"rgba(148,103,189,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022],"y":[0.44600000000000001,0.26400000000000001,0.25600000000000001,0.33500000000000002,0.76000000000000001,1.5349999999999999,0.83299999999999996,0.69299999999999995,0.67100000000000004,0.66100000000000003,0.755],"name":"Somalia","type":"scatter","mode":"none","stackgroup":"one","fillcolor":"#0072B2","hoverinfo":["none","none","none","none","none","none","none","none","none","none","none"],"marker":{"color":"rgba(140,86,75,1)","line":{"color":"rgba(140,86,75,1)"}},"error_y":{"color":"rgba(140,86,75,1)"},"error_x":{"color":"rgba(140,86,75,1)"},"line":{"color":"rgba(140,86,75,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022],"y":[1.014,0.90700000000000003,0.54500000000000004,0.22600000000000001,0.53100000000000003,0.376,0.32300000000000001,0.36799999999999999,0.746,0.49399999999999999,0.44700000000000001],"name":"Syria","type":"scatter","mode":"none","stackgroup":"one","fillcolor":"#999999","hoverinfo":["none","none","none","none","none","none","none","none","none","none","none"],"marker":{"color":"rgba(227,119,194,1)","line":{"color":"rgba(227,119,194,1)"}},"error_y":{"color":"rgba(227,119,194,1)"},"error_x":{"color":"rgba(227,119,194,1)"},"line":{"color":"rgba(227,119,194,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022],"y":[0,0,0,0.0040000000000000001,0.052999999999999999,0.071999999999999995,0.14399999999999999,0.68200000000000005,0.66600000000000004,0.75900000000000001,1.135],"name":"Burkina Faso","type":"scatter","mode":"none","stackgroup":"one","fillcolor":"#D55E00","hoverinfo":["none","none","none","none","none","none","none","none","none","none","none"],"marker":{"color":"rgba(127,127,127,1)","line":{"color":"rgba(127,127,127,1)"}},"error_y":{"color":"rgba(127,127,127,1)"},"error_x":{"color":"rgba(127,127,127,1)"},"line":{"color":"rgba(127,127,127,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022],"y":[0.044999999999999998,0.044999999999999998,0.035999999999999997,0.18099999999999999,0.14399999999999999,0.29599999999999999,0.34000000000000002,0.38900000000000001,0.40400000000000003,0.60399999999999998,0.94399999999999995],"name":"Mali","type":"scatter","mode":"none","stackgroup":"one","fillcolor":"#CC79A7","hoverinfo":["none","none","none","none","none","none","none","none","none","none","none"],"marker":{"color":"rgba(188,189,34,1)","line":{"color":"rgba(188,189,34,1)"}},"error_y":{"color":"rgba(188,189,34,1)"},"error_x":{"color":"rgba(188,189,34,1)"},"line":{"color":"rgba(188,189,34,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022],"y":[7.1909999999999998,8.5530000000000008,8.2829999999999995,7.3890000000000002,7.7940000000000005,6.6929999999999996,5.4909999999999997,4.7969999999999997,5.3710000000000004,5.3460000000000001,5.1159999999999997],"name":"Global total","type":"scatter","mode":"lines","line":{"color":"black","width":2},"hoverinfo":["none","none","none","none","none","none","none","none","none","none","none"],"marker":{"color":"rgba(23,190,207,1)","line":{"color":"rgba(23,190,207,1)"}},"error_y":{"color":"rgba(23,190,207,1)"},"error_x":{"color":"rgba(23,190,207,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022],"y":[10.2636,10.2636,10.2636,10.2636,10.2636,10.2636,10.2636,10.2636,10.2636,10.2636,10.2636],"type":"scatter","mode":"markers","marker":{"color":"rgba(31,119,180,1)","size":0,"line":{"color":"rgba(31,119,180,1)"}},"hoverinfo":["text","text","text","text","text","text","text","text","text","text","text"],"text":["Year: 2012<br>Global total: 7.19 k deaths<br><span style='color:#CC79A7'>&#9632;<\/span> Mali: 0.04 k deaths<br><span style='color:#D55E00'>&#9632;<\/span> Burkina Faso: 0.00 k deaths<br><span style='color:#999999'>&#9632;<\/span> Syria: 1.01 k deaths<br><span style='color:#0072B2'>&#9632;<\/span> Somalia: 0.45 k deaths<br><span style='color:#F0E442'>&#9632;<\/span> Pakistan: 1.32 k deaths<br><span style='color:#009E73'>&#9632;<\/span> Nigeria: 0.77 k deaths<br><span style='color:#56B4E9'>&#9632;<\/span> Afghanistan: 1.51 k deaths<br><span style='color:#E69F00'>&#9632;<\/span> Iraq: 2.09 k deaths","Year: 2013<br>Global total: 8.55 k deaths<br><span style='color:#CC79A7'>&#9632;<\/span> Mali: 0.04 k deaths<br><span style='color:#D55E00'>&#9632;<\/span> Burkina Faso: 0.00 k deaths<br><span style='color:#999999'>&#9632;<\/span> Syria: 0.91 k deaths<br><span style='color:#0072B2'>&#9632;<\/span> Somalia: 0.26 k deaths<br><span style='color:#F0E442'>&#9632;<\/span> Pakistan: 1.50 k deaths<br><span style='color:#009E73'>&#9632;<\/span> Nigeria: 0.93 k deaths<br><span style='color:#56B4E9'>&#9632;<\/span> Afghanistan: 0.92 k deaths<br><span style='color:#E69F00'>&#9632;<\/span> Iraq: 3.98 k deaths","Year: 2014<br>Global total: 8.28 k deaths<br><span style='color:#CC79A7'>&#9632;<\/span> Mali: 0.04 k deaths<br><span style='color:#D55E00'>&#9632;<\/span> Burkina Faso: 0.00 k deaths<br><span style='color:#999999'>&#9632;<\/span> Syria: 0.54 k deaths<br><span style='color:#0072B2'>&#9632;<\/span> Somalia: 0.26 k deaths<br><span style='color:#F0E442'>&#9632;<\/span> Pakistan: 1.00 k deaths<br><span style='color:#009E73'>&#9632;<\/span> Nigeria: 2.10 k deaths<br><span style='color:#56B4E9'>&#9632;<\/span> Afghanistan: 1.14 k deaths<br><span style='color:#E69F00'>&#9632;<\/span> Iraq: 3.21 k deaths","Year: 2015<br>Global total: 7.39 k deaths<br><span style='color:#CC79A7'>&#9632;<\/span> Mali: 0.18 k deaths<br><span style='color:#D55E00'>&#9632;<\/span> Burkina Faso: 0.00 k deaths<br><span style='color:#999999'>&#9632;<\/span> Syria: 0.23 k deaths<br><span style='color:#0072B2'>&#9632;<\/span> Somalia: 0.34 k deaths<br><span style='color:#F0E442'>&#9632;<\/span> Pakistan: 0.66 k deaths<br><span style='color:#009E73'>&#9632;<\/span> Nigeria: 2.00 k deaths<br><span style='color:#56B4E9'>&#9632;<\/span> Afghanistan: 1.01 k deaths<br><span style='color:#E69F00'>&#9632;<\/span> Iraq: 2.97 k deaths","Year: 2016<br>Global total: 7.79 k deaths<br><span style='color:#CC79A7'>&#9632;<\/span> Mali: 0.14 k deaths<br><span style='color:#D55E00'>&#9632;<\/span> Burkina Faso: 0.05 k deaths<br><span style='color:#999999'>&#9632;<\/span> Syria: 0.53 k deaths<br><span style='color:#0072B2'>&#9632;<\/span> Somalia: 0.76 k deaths<br><span style='color:#F0E442'>&#9632;<\/span> Pakistan: 0.63 k deaths<br><span style='color:#009E73'>&#9632;<\/span> Nigeria: 0.52 k deaths<br><span style='color:#56B4E9'>&#9632;<\/span> Afghanistan: 0.64 k deaths<br><span style='color:#E69F00'>&#9632;<\/span> Iraq: 4.51 k deaths","Year: 2017<br>Global total: 6.69 k deaths<br><span style='color:#CC79A7'>&#9632;<\/span> Mali: 0.30 k deaths<br><span style='color:#D55E00'>&#9632;<\/span> Burkina Faso: 0.07 k deaths<br><span style='color:#999999'>&#9632;<\/span> Syria: 0.38 k deaths<br><span style='color:#0072B2'>&#9632;<\/span> Somalia: 1.53 k deaths<br><span style='color:#F0E442'>&#9632;<\/span> Pakistan: 0.63 k deaths<br><span style='color:#009E73'>&#9632;<\/span> Nigeria: 0.79 k deaths<br><span style='color:#56B4E9'>&#9632;<\/span> Afghanistan: 1.26 k deaths<br><span style='color:#E69F00'>&#9632;<\/span> Iraq: 1.73 k deaths","Year: 2018<br>Global total: 5.49 k deaths<br><span style='color:#CC79A7'>&#9632;<\/span> Mali: 0.34 k deaths<br><span style='color:#D55E00'>&#9632;<\/span> Burkina Faso: 0.14 k deaths<br><span style='color:#999999'>&#9632;<\/span> Syria: 0.32 k deaths<br><span style='color:#0072B2'>&#9632;<\/span> Somalia: 0.83 k deaths<br><span style='color:#F0E442'>&#9632;<\/span> Pakistan: 0.50 k deaths<br><span style='color:#009E73'>&#9632;<\/span> Nigeria: 0.64 k deaths<br><span style='color:#56B4E9'>&#9632;<\/span> Afghanistan: 1.62 k deaths<br><span style='color:#E69F00'>&#9632;<\/span> Iraq: 1.08 k deaths","Year: 2019<br>Global total: 4.8 k deaths<br><span style='color:#CC79A7'>&#9632;<\/span> Mali: 0.39 k deaths<br><span style='color:#D55E00'>&#9632;<\/span> Burkina Faso: 0.68 k deaths<br><span style='color:#999999'>&#9632;<\/span> Syria: 0.37 k deaths<br><span style='color:#0072B2'>&#9632;<\/span> Somalia: 0.69 k deaths<br><span style='color:#F0E442'>&#9632;<\/span> Pakistan: 0.25 k deaths<br><span style='color:#009E73'>&#9632;<\/span> Nigeria: 0.69 k deaths<br><span style='color:#56B4E9'>&#9632;<\/span> Afghanistan: 1.19 k deaths<br><span style='color:#E69F00'>&#9632;<\/span> Iraq: 0.53 k deaths","Year: 2020<br>Global total: 5.37 k deaths<br><span style='color:#CC79A7'>&#9632;<\/span> Mali: 0.40 k deaths<br><span style='color:#D55E00'>&#9632;<\/span> Burkina Faso: 0.67 k deaths<br><span style='color:#999999'>&#9632;<\/span> Syria: 0.75 k deaths<br><span style='color:#0072B2'>&#9632;<\/span> Somalia: 0.67 k deaths<br><span style='color:#F0E442'>&#9632;<\/span> Pakistan: 0.26 k deaths<br><span style='color:#009E73'>&#9632;<\/span> Nigeria: 0.86 k deaths<br><span style='color:#56B4E9'>&#9632;<\/span> Afghanistan: 1.29 k deaths<br><span style='color:#E69F00'>&#9632;<\/span> Iraq: 0.46 k deaths","Year: 2021<br>Global total: 5.35 k deaths<br><span style='color:#CC79A7'>&#9632;<\/span> Mali: 0.60 k deaths<br><span style='color:#D55E00'>&#9632;<\/span> Burkina Faso: 0.76 k deaths<br><span style='color:#999999'>&#9632;<\/span> Syria: 0.49 k deaths<br><span style='color:#0072B2'>&#9632;<\/span> Somalia: 0.66 k deaths<br><span style='color:#F0E442'>&#9632;<\/span> Pakistan: 0.29 k deaths<br><span style='color:#009E73'>&#9632;<\/span> Nigeria: 0.50 k deaths<br><span style='color:#56B4E9'>&#9632;<\/span> Afghanistan: 1.50 k deaths<br><span style='color:#E69F00'>&#9632;<\/span> Iraq: 0.54 k deaths","Year: 2022<br>Global total: 5.12 k deaths<br><span style='color:#CC79A7'>&#9632;<\/span> Mali: 0.94 k deaths<br><span style='color:#D55E00'>&#9632;<\/span> Burkina Faso: 1.14 k deaths<br><span style='color:#999999'>&#9632;<\/span> Syria: 0.45 k deaths<br><span style='color:#0072B2'>&#9632;<\/span> Somalia: 0.76 k deaths<br><span style='color:#F0E442'>&#9632;<\/span> Pakistan: 0.64 k deaths<br><span style='color:#009E73'>&#9632;<\/span> Nigeria: 0.38 k deaths<br><span style='color:#56B4E9'>&#9632;<\/span> Afghanistan: 0.63 k deaths<br><span style='color:#E69F00'>&#9632;<\/span> Iraq: 0.17 k deaths"],"hoverlabel":{"align":"left","font":{"size":10}},"showlegend":false,"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"line":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>htmlwidgets<span class="sc">::</span><span class="fu">saveWidget</span>(</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>  p,                                     <span class="co"># your plotly object</span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">file          =</span> <span class="st">"terror-fatalities-stack.html"</span>,</span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">selfcontained =</span> <span class="cn">TRUE</span></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<!-- -->

</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb48" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Global Terrorism Index Analysis (2012-2022)"</span></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a><span class="an">subtitle:</span><span class="co"> "Exploring Patterns and Trends in Terrorism Impact"</span></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span><span class="co"> "`Tee Yu Cheng`"</span></span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span><span class="co"> </span></span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a><span class="co">  html:</span></span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a><span class="co">    theme: cosmo</span></span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a><span class="co">    toc: true</span></span>
<span id="cb48-9"><a href="#cb48-9" aria-hidden="true" tabindex="-1"></a><span class="co">    toc-depth: 3</span></span>
<span id="cb48-10"><a href="#cb48-10" aria-hidden="true" tabindex="-1"></a><span class="co">    toc-title: "Contents"</span></span>
<span id="cb48-11"><a href="#cb48-11" aria-hidden="true" tabindex="-1"></a><span class="co">    code-fold: true</span></span>
<span id="cb48-12"><a href="#cb48-12" aria-hidden="true" tabindex="-1"></a><span class="co">    code-tools: true</span></span>
<span id="cb48-13"><a href="#cb48-13" aria-hidden="true" tabindex="-1"></a><span class="co">    fig-width: 12</span></span>
<span id="cb48-14"><a href="#cb48-14" aria-hidden="true" tabindex="-1"></a><span class="co">    fig-height: 8</span></span>
<span id="cb48-15"><a href="#cb48-15" aria-hidden="true" tabindex="-1"></a><span class="co">    highlight-style: github</span></span>
<span id="cb48-16"><a href="#cb48-16" aria-hidden="true" tabindex="-1"></a><span class="an">editor:</span><span class="co"> visual</span></span>
<span id="cb48-17"><a href="#cb48-17" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb48-18"><a href="#cb48-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-19"><a href="#cb48-19" aria-hidden="true" tabindex="-1"></a><span class="in">```{=html}</span></span>
<span id="cb48-20"><a href="#cb48-20" aria-hidden="true" tabindex="-1"></a><span class="in">&lt;style&gt;</span></span>
<span id="cb48-21"><a href="#cb48-21" aria-hidden="true" tabindex="-1"></a><span class="in">h1, h2, h3, h4 {</span></span>
<span id="cb48-22"><a href="#cb48-22" aria-hidden="true" tabindex="-1"></a><span class="in">  color: #2c3e50;</span></span>
<span id="cb48-23"><a href="#cb48-23" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb48-24"><a href="#cb48-24" aria-hidden="true" tabindex="-1"></a><span class="in">.section-divider {</span></span>
<span id="cb48-25"><a href="#cb48-25" aria-hidden="true" tabindex="-1"></a><span class="in">  border-top: 1px solid #e0e0e0;</span></span>
<span id="cb48-26"><a href="#cb48-26" aria-hidden="true" tabindex="-1"></a><span class="in">  margin: 2em 0;</span></span>
<span id="cb48-27"><a href="#cb48-27" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb48-28"><a href="#cb48-28" aria-hidden="true" tabindex="-1"></a><span class="in">.description-box {</span></span>
<span id="cb48-29"><a href="#cb48-29" aria-hidden="true" tabindex="-1"></a><span class="in">  background-color: #f8f9fa;</span></span>
<span id="cb48-30"><a href="#cb48-30" aria-hidden="true" tabindex="-1"></a><span class="in">  padding: 1em;</span></span>
<span id="cb48-31"><a href="#cb48-31" aria-hidden="true" tabindex="-1"></a><span class="in">  margin: 1em 0;</span></span>
<span id="cb48-32"><a href="#cb48-32" aria-hidden="true" tabindex="-1"></a><span class="in">  border-radius: 4px;</span></span>
<span id="cb48-33"><a href="#cb48-33" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb48-34"><a href="#cb48-34" aria-hidden="true" tabindex="-1"></a><span class="in">.highlight-box {</span></span>
<span id="cb48-35"><a href="#cb48-35" aria-hidden="true" tabindex="-1"></a><span class="in">  border-left: 5px solid #f0ad4e;</span></span>
<span id="cb48-36"><a href="#cb48-36" aria-hidden="true" tabindex="-1"></a><span class="in">  background-color: #fcf8e3;</span></span>
<span id="cb48-37"><a href="#cb48-37" aria-hidden="true" tabindex="-1"></a><span class="in">  padding: 1em;</span></span>
<span id="cb48-38"><a href="#cb48-38" aria-hidden="true" tabindex="-1"></a><span class="in">  margin: 1em 0;</span></span>
<span id="cb48-39"><a href="#cb48-39" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb48-40"><a href="#cb48-40" aria-hidden="true" tabindex="-1"></a><span class="in">.insight-box {</span></span>
<span id="cb48-41"><a href="#cb48-41" aria-hidden="true" tabindex="-1"></a><span class="in">  border-left: 5px solid #5bc0de;</span></span>
<span id="cb48-42"><a href="#cb48-42" aria-hidden="true" tabindex="-1"></a><span class="in">  background-color: #f0f7fd;</span></span>
<span id="cb48-43"><a href="#cb48-43" aria-hidden="true" tabindex="-1"></a><span class="in">  padding: 1em;</span></span>
<span id="cb48-44"><a href="#cb48-44" aria-hidden="true" tabindex="-1"></a><span class="in">  margin: 1em 0;</span></span>
<span id="cb48-45"><a href="#cb48-45" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb48-46"><a href="#cb48-46" aria-hidden="true" tabindex="-1"></a><span class="in">&lt;/style&gt;</span></span>
<span id="cb48-47"><a href="#cb48-47" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb48-48"><a href="#cb48-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-49"><a href="#cb48-49" aria-hidden="true" tabindex="-1"></a><span class="fu"># 1. Introduction {.section-header}</span></span>
<span id="cb48-50"><a href="#cb48-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-51"><a href="#cb48-51" aria-hidden="true" tabindex="-1"></a>::: description-box</span>
<span id="cb48-52"><a href="#cb48-52" aria-hidden="true" tabindex="-1"></a>This analysis explores the Global Terrorism Index (GTI) data from 2012 to 2022, examining trends and patterns in terrorism impact across countries. The GTI is a comprehensive measure that incorporates incidents, fatalities, injuries, and hostage situations to quantify the impact of terrorism globally.</span>
<span id="cb48-53"><a href="#cb48-53" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb48-54"><a href="#cb48-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-57"><a href="#cb48-57" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb48-58"><a href="#cb48-58" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: setup</span></span>
<span id="cb48-59"><a href="#cb48-59" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb48-60"><a href="#cb48-60" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb48-61"><a href="#cb48-61" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb48-62"><a href="#cb48-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-63"><a href="#cb48-63" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb48-64"><a href="#cb48-64" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb48-65"><a href="#cb48-65" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb48-66"><a href="#cb48-66" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb48-67"><a href="#cb48-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-68"><a href="#cb48-68" aria-hidden="true" tabindex="-1"></a><span class="co"># Load the data</span></span>
<span id="cb48-69"><a href="#cb48-69" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"data/Global Terrorism Index 2023.xlsx"</span>, <span class="at">sheet =</span> <span class="st">"Overall Scores"</span>)</span>
<span id="cb48-70"><a href="#cb48-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-71"><a href="#cb48-71" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert to long format</span></span>
<span id="cb48-72"><a href="#cb48-72" aria-hidden="true" tabindex="-1"></a>long_df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb48-73"><a href="#cb48-73" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">matches</span>(<span class="st">"^[0-9]{4} Score$"</span>), <span class="at">names_to =</span> <span class="st">"Year"</span>, <span class="at">values_to =</span> <span class="st">"Score"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb48-74"><a href="#cb48-74" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Year =</span> <span class="fu">as.integer</span>(<span class="fu">gsub</span>(<span class="st">" Score"</span>, <span class="st">""</span>, Year)))</span>
<span id="cb48-75"><a href="#cb48-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-76"><a href="#cb48-76" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter top 15 countries based on latest score</span></span>
<span id="cb48-77"><a href="#cb48-77" aria-hidden="true" tabindex="-1"></a>top15 <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb48-78"><a href="#cb48-78" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Country, <span class="st">`</span><span class="at">2022 Score</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb48-79"><a href="#cb48-79" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(<span class="st">`</span><span class="at">2022 Score</span><span class="st">`</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb48-80"><a href="#cb48-80" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">15</span>) <span class="sc">%&gt;%</span></span>
<span id="cb48-81"><a href="#cb48-81" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(Country)</span>
<span id="cb48-82"><a href="#cb48-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-83"><a href="#cb48-83" aria-hidden="true" tabindex="-1"></a>filtered_df <span class="ot">&lt;-</span> long_df <span class="sc">%&gt;%</span></span>
<span id="cb48-84"><a href="#cb48-84" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Country <span class="sc">%in%</span> top15)</span>
<span id="cb48-85"><a href="#cb48-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-86"><a href="#cb48-86" aria-hidden="true" tabindex="-1"></a><span class="co"># Read combined raw sheet</span></span>
<span id="cb48-87"><a href="#cb48-87" aria-hidden="true" tabindex="-1"></a>data_path <span class="ot">&lt;-</span> <span class="st">"data/Global Terrorism Index 2023.xlsx"</span></span>
<span id="cb48-88"><a href="#cb48-88" aria-hidden="true" tabindex="-1"></a>combined_raw_df <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(data_path, <span class="at">sheet =</span> <span class="st">"Combined raw"</span>)</span>
<span id="cb48-89"><a href="#cb48-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-90"><a href="#cb48-90" aria-hidden="true" tabindex="-1"></a><span class="co"># Clean and filter data</span></span>
<span id="cb48-91"><a href="#cb48-91" aria-hidden="true" tabindex="-1"></a>combined_raw_df <span class="ot">&lt;-</span> combined_raw_df <span class="sc">%&gt;%</span></span>
<span id="cb48-92"><a href="#cb48-92" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">c</span>(Incidents, Fatalities, Injuries, Hostages, Score), as.numeric),</span>
<span id="cb48-93"><a href="#cb48-93" aria-hidden="true" tabindex="-1"></a>         <span class="at">Year =</span> <span class="fu">as.integer</span>(Year)) <span class="sc">%&gt;%</span></span>
<span id="cb48-94"><a href="#cb48-94" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Year <span class="sc">&gt;=</span> <span class="dv">2012</span> <span class="sc">&amp;</span> Year <span class="sc">&lt;=</span> <span class="dv">2022</span>)</span>
<span id="cb48-95"><a href="#cb48-95" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-96"><a href="#cb48-96" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb48-97"><a href="#cb48-97" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-98"><a href="#cb48-98" aria-hidden="true" tabindex="-1"></a><span class="fu"># 2. Exploration Data Analysis {.section-header}</span></span>
<span id="cb48-99"><a href="#cb48-99" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-100"><a href="#cb48-100" aria-hidden="true" tabindex="-1"></a><span class="fu">## 2.1. Terrorism Index Overview {.section-header}</span></span>
<span id="cb48-101"><a href="#cb48-101" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-102"><a href="#cb48-102" aria-hidden="true" tabindex="-1"></a>::: description-box</span>
<span id="cb48-103"><a href="#cb48-103" aria-hidden="true" tabindex="-1"></a>The first visualization shows the overall trend of GTI scores for the top 15 most affected countries from 2012 to 2022. This provides a comparative view of how terrorism impact has evolved over time across these nations.</span>
<span id="cb48-104"><a href="#cb48-104" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb48-105"><a href="#cb48-105" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-108"><a href="#cb48-108" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb48-109"><a href="#cb48-109" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: overall-trend</span></span>
<span id="cb48-110"><a href="#cb48-110" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Trend of GTI Scores for Top 15 Most Affected Countries (2012-2022)"</span></span>
<span id="cb48-111"><a href="#cb48-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-112"><a href="#cb48-112" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the data</span></span>
<span id="cb48-113"><a href="#cb48-113" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(filtered_df, <span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> Score, <span class="at">color =</span> Country)) <span class="sc">+</span></span>
<span id="cb48-114"><a href="#cb48-114" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">linewidth =</span> <span class="fl">1.2</span>) <span class="sc">+</span>   <span class="co"># ← updated here</span></span>
<span id="cb48-115"><a href="#cb48-115" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb48-116"><a href="#cb48-116" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb48-117"><a href="#cb48-117" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Top 15 Countries by Terrorism Index Score (2012–2022)"</span>,</span>
<span id="cb48-118"><a href="#cb48-118" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"GTI Score"</span>,</span>
<span id="cb48-119"><a href="#cb48-119" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Year"</span>,</span>
<span id="cb48-120"><a href="#cb48-120" aria-hidden="true" tabindex="-1"></a>       <span class="at">color =</span> <span class="st">"Country"</span>) <span class="sc">+</span></span>
<span id="cb48-121"><a href="#cb48-121" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb48-122"><a href="#cb48-122" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.position =</span> <span class="st">"bottom"</span>,</span>
<span id="cb48-123"><a href="#cb48-123" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>))</span>
<span id="cb48-124"><a href="#cb48-124" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb48-125"><a href="#cb48-125" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-126"><a href="#cb48-126" aria-hidden="true" tabindex="-1"></a>::: insight-box</span>
<span id="cb48-127"><a href="#cb48-127" aria-hidden="true" tabindex="-1"></a>**Key Insights:**&lt;br&gt;&lt;br&gt; • Afghanistan has consistently maintained the highest GTI score throughout most of the period&lt;br&gt; • Iraq shows a significant decline in terrorism impact since its peak around 2014-2015&lt;br&gt; • Several countries show recent increases in their GTI scores, suggesting emerging terrorism hotspots&lt;br&gt; • The overall pattern reveals fluctuating impacts, indicating the dynamic nature of terrorism threats globally</span>
<span id="cb48-128"><a href="#cb48-128" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb48-129"><a href="#cb48-129" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-130"><a href="#cb48-130" aria-hidden="true" tabindex="-1"></a><span class="fu">## 2.2. Detailed Country Analysis with Severity Classification {.section-header}</span></span>
<span id="cb48-131"><a href="#cb48-131" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-132"><a href="#cb48-132" aria-hidden="true" tabindex="-1"></a>::: description-box</span>
<span id="cb48-133"><a href="#cb48-133" aria-hidden="true" tabindex="-1"></a>This visualization breaks down the terrorism index trends by country with clear severity classifications. The background color bands indicate different severity levels (Severe, High, Moderate, Low), providing context for interpreting the GTI scores.</span>
<span id="cb48-134"><a href="#cb48-134" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb48-135"><a href="#cb48-135" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-138"><a href="#cb48-138" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb48-139"><a href="#cb48-139" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: country-severity</span></span>
<span id="cb48-140"><a href="#cb48-140" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Terrorism Index Trends by Country (2012–2022), with Severity Levels"</span></span>
<span id="cb48-141"><a href="#cb48-141" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 12</span></span>
<span id="cb48-142"><a href="#cb48-142" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 8</span></span>
<span id="cb48-143"><a href="#cb48-143" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-144"><a href="#cb48-144" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(filtered_df, <span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> Score)) <span class="sc">+</span></span>
<span id="cb48-145"><a href="#cb48-145" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Severity background bands (more visible)</span></span>
<span id="cb48-146"><a href="#cb48-146" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"rect"</span>, <span class="at">xmin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">xmax =</span> <span class="cn">Inf</span>, <span class="at">ymin =</span> <span class="dv">8</span>, <span class="at">ymax =</span> <span class="dv">10</span>,</span>
<span id="cb48-147"><a href="#cb48-147" aria-hidden="true" tabindex="-1"></a>           <span class="at">fill =</span> <span class="st">"#B22222"</span>, <span class="at">alpha =</span> <span class="fl">0.15</span>) <span class="sc">+</span></span>
<span id="cb48-148"><a href="#cb48-148" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"rect"</span>, <span class="at">xmin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">xmax =</span> <span class="cn">Inf</span>, <span class="at">ymin =</span> <span class="dv">6</span>, <span class="at">ymax =</span> <span class="dv">8</span>,</span>
<span id="cb48-149"><a href="#cb48-149" aria-hidden="true" tabindex="-1"></a>           <span class="at">fill =</span> <span class="st">"#FF8C00"</span>, <span class="at">alpha =</span> <span class="fl">0.15</span>) <span class="sc">+</span></span>
<span id="cb48-150"><a href="#cb48-150" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"rect"</span>, <span class="at">xmin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">xmax =</span> <span class="cn">Inf</span>, <span class="at">ymin =</span> <span class="dv">4</span>, <span class="at">ymax =</span> <span class="dv">6</span>,</span>
<span id="cb48-151"><a href="#cb48-151" aria-hidden="true" tabindex="-1"></a>           <span class="at">fill =</span> <span class="st">"#FFD700"</span>, <span class="at">alpha =</span> <span class="fl">0.15</span>) <span class="sc">+</span></span>
<span id="cb48-152"><a href="#cb48-152" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"rect"</span>, <span class="at">xmin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">xmax =</span> <span class="cn">Inf</span>, <span class="at">ymin =</span> <span class="dv">0</span>, <span class="at">ymax =</span> <span class="dv">4</span>,</span>
<span id="cb48-153"><a href="#cb48-153" aria-hidden="true" tabindex="-1"></a>           <span class="at">fill =</span> <span class="st">"#90EE90"</span>, <span class="at">alpha =</span> <span class="fl">0.15</span>) <span class="sc">+</span></span>
<span id="cb48-154"><a href="#cb48-154" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb48-155"><a href="#cb48-155" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add labels to indicate severity zones</span></span>
<span id="cb48-156"><a href="#cb48-156" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">x =</span> <span class="dv">2013</span>, <span class="at">y =</span> <span class="dv">9</span>, <span class="at">label =</span> <span class="st">"Severe"</span>, <span class="at">color =</span> <span class="st">"#8B0000"</span>, <span class="at">size =</span> <span class="dv">4</span>, <span class="at">fontface =</span> <span class="st">"bold"</span>) <span class="sc">+</span></span>
<span id="cb48-157"><a href="#cb48-157" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">x =</span> <span class="dv">2013</span>, <span class="at">y =</span> <span class="dv">7</span>, <span class="at">label =</span> <span class="st">"High"</span>, <span class="at">color =</span> <span class="st">"#FF8C00"</span>, <span class="at">size =</span> <span class="dv">4</span>, <span class="at">fontface =</span> <span class="st">"bold"</span>) <span class="sc">+</span></span>
<span id="cb48-158"><a href="#cb48-158" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">x =</span> <span class="dv">2013</span>, <span class="at">y =</span> <span class="dv">5</span>, <span class="at">label =</span> <span class="st">"Moderate"</span>, <span class="at">color =</span> <span class="st">"#DAA520"</span>, <span class="at">size =</span> <span class="dv">4</span>, <span class="at">fontface =</span> <span class="st">"bold"</span>) <span class="sc">+</span></span>
<span id="cb48-159"><a href="#cb48-159" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">x =</span> <span class="dv">2013</span>, <span class="at">y =</span> <span class="dv">2</span>, <span class="at">label =</span> <span class="st">"Low"</span>, <span class="at">color =</span> <span class="st">"#228B22"</span>, <span class="at">size =</span> <span class="dv">4</span>, <span class="at">fontface =</span> <span class="st">"bold"</span>) <span class="sc">+</span></span>
<span id="cb48-160"><a href="#cb48-160" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-161"><a href="#cb48-161" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Main line chart</span></span>
<span id="cb48-162"><a href="#cb48-162" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">color =</span> <span class="st">"#000000"</span>, <span class="at">linewidth =</span> <span class="fl">1.2</span>) <span class="sc">+</span></span>
<span id="cb48-163"><a href="#cb48-163" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">color =</span> <span class="st">"#000000"</span>, <span class="at">size =</span> <span class="fl">1.2</span>) <span class="sc">+</span></span>
<span id="cb48-164"><a href="#cb48-164" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb48-165"><a href="#cb48-165" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Faceted by country</span></span>
<span id="cb48-166"><a href="#cb48-166" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>Country, <span class="at">ncol =</span> <span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb48-167"><a href="#cb48-167" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">12</span>) <span class="sc">+</span></span>
<span id="cb48-168"><a href="#cb48-168" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb48-169"><a href="#cb48-169" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Terrorism Index Trends by Country (2012–2022)"</span>,</span>
<span id="cb48-170"><a href="#cb48-170" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"GTI Scores Categorized by Severity Levels"</span>,</span>
<span id="cb48-171"><a href="#cb48-171" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Year"</span>,</span>
<span id="cb48-172"><a href="#cb48-172" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"GTI Score (0–10)</span><span class="sc">\n</span><span class="st">Higher = More Impact from Terrorism"</span></span>
<span id="cb48-173"><a href="#cb48-173" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb48-174"><a href="#cb48-174" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb48-175"><a href="#cb48-175" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">16</span>, <span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb48-176"><a href="#cb48-176" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">13</span>, <span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb48-177"><a href="#cb48-177" aria-hidden="true" tabindex="-1"></a>    <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">11</span>, <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb48-178"><a href="#cb48-178" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>),</span>
<span id="cb48-179"><a href="#cb48-179" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>()</span>
<span id="cb48-180"><a href="#cb48-180" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb48-181"><a href="#cb48-181" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-182"><a href="#cb48-182" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb48-183"><a href="#cb48-183" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-184"><a href="#cb48-184" aria-hidden="true" tabindex="-1"></a>::: insight-box</span>
<span id="cb48-185"><a href="#cb48-185" aria-hidden="true" tabindex="-1"></a>**Key Insights:**&lt;br&gt; &lt;br&gt; • Most countries have experienced periods in the "High" to "Severe" range during the decade&lt;br&gt; • Some countries show clear improvement patterns (Iraq, Syria, Nigeria)&lt;br&gt; • Others demonstrate concerning upward trends (Burkina Faso, Mali)&lt;br&gt; • Afghanistan has remained consistently in the "Severe" category&lt;br&gt; • The severity classification provides important context for understanding the relative impact of terrorism</span>
<span id="cb48-186"><a href="#cb48-186" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb48-187"><a href="#cb48-187" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-188"><a href="#cb48-188" aria-hidden="true" tabindex="-1"></a><span class="fu">## 2.3. Impact Analysis: Casualties and Incidents {.section-header}</span></span>
<span id="cb48-189"><a href="#cb48-189" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-190"><a href="#cb48-190" aria-hidden="true" tabindex="-1"></a><span class="fu">### 2.3.1. Top 15 Countries by Total Fatalities {.section-header}</span></span>
<span id="cb48-191"><a href="#cb48-191" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-192"><a href="#cb48-192" aria-hidden="true" tabindex="-1"></a>::: description-box</span>
<span id="cb48-193"><a href="#cb48-193" aria-hidden="true" tabindex="-1"></a>This visualization shows the countries with the highest number of terrorism-related fatalities over the 2012-2022 period. The number of fatalities is a direct measure of the human cost of terrorism.</span>
<span id="cb48-194"><a href="#cb48-194" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb48-195"><a href="#cb48-195" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-198"><a href="#cb48-198" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb48-199"><a href="#cb48-199" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fatalities</span></span>
<span id="cb48-200"><a href="#cb48-200" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Countries with Highest Terrorism-Related Fatalities (2012-2022)"</span></span>
<span id="cb48-201"><a href="#cb48-201" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb48-202"><a href="#cb48-202" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-203"><a href="#cb48-203" aria-hidden="true" tabindex="-1"></a>top_deaths <span class="ot">&lt;-</span> combined_raw_df <span class="sc">%&gt;%</span></span>
<span id="cb48-204"><a href="#cb48-204" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Country) <span class="sc">%&gt;%</span></span>
<span id="cb48-205"><a href="#cb48-205" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Total_Deaths =</span> <span class="fu">sum</span>(Fatalities, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb48-206"><a href="#cb48-206" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Total_Deaths)) <span class="sc">%&gt;%</span></span>
<span id="cb48-207"><a href="#cb48-207" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">15</span>)</span>
<span id="cb48-208"><a href="#cb48-208" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-209"><a href="#cb48-209" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(top_deaths, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(Country, Total_Deaths), <span class="at">y =</span> Total_Deaths)) <span class="sc">+</span></span>
<span id="cb48-210"><a href="#cb48-210" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">fill =</span> <span class="st">"darkred"</span>) <span class="sc">+</span></span>
<span id="cb48-211"><a href="#cb48-211" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add value labels at the end of each bar</span></span>
<span id="cb48-212"><a href="#cb48-212" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">format</span>(Total_Deaths, <span class="at">big.mark =</span> <span class="st">","</span>)), </span>
<span id="cb48-213"><a href="#cb48-213" aria-hidden="true" tabindex="-1"></a>            <span class="at">hjust =</span> <span class="sc">-</span><span class="fl">0.2</span>, <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">fontface =</span> <span class="st">"bold"</span>, <span class="at">size =</span> <span class="fl">3.5</span>) <span class="sc">+</span></span>
<span id="cb48-214"><a href="#cb48-214" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>(<span class="at">clip =</span> <span class="st">"off"</span>) <span class="sc">+</span>  <span class="co"># Prevent clipping of labels</span></span>
<span id="cb48-215"><a href="#cb48-215" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="cf">function</span>(x) <span class="fu">c</span>(<span class="dv">0</span>, x[<span class="dv">2</span>] <span class="sc">*</span> <span class="fl">1.1</span>)) <span class="sc">+</span>  <span class="co"># Expand y-axis to make room for labels</span></span>
<span id="cb48-216"><a href="#cb48-216" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Top 15 Countries by Total Fatalities (2012–2022)"</span>,</span>
<span id="cb48-217"><a href="#cb48-217" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Country"</span>, <span class="at">y =</span> <span class="st">"Total Fatalities"</span>) <span class="sc">+</span></span>
<span id="cb48-218"><a href="#cb48-218" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb48-219"><a href="#cb48-219" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb48-220"><a href="#cb48-220" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb48-221"><a href="#cb48-221" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb48-222"><a href="#cb48-222" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.margin =</span> <span class="fu">margin</span>(<span class="fl">5.5</span>, <span class="dv">30</span>, <span class="fl">5.5</span>, <span class="fl">5.5</span>)  <span class="co"># Add right margin for labels</span></span>
<span id="cb48-223"><a href="#cb48-223" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb48-224"><a href="#cb48-224" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb48-225"><a href="#cb48-225" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-226"><a href="#cb48-226" aria-hidden="true" tabindex="-1"></a><span class="fu">### 2.3.2. Top 15 Countries by Total Injuries {.section-header}</span></span>
<span id="cb48-227"><a href="#cb48-227" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-228"><a href="#cb48-228" aria-hidden="true" tabindex="-1"></a>::: description-box</span>
<span id="cb48-229"><a href="#cb48-229" aria-hidden="true" tabindex="-1"></a>Beyond fatalities, injuries represent another significant impact of terrorism. This visualization shows the countries with the highest number of terrorism-related injuries, which often outnumber fatalities and create long-term burdens on healthcare systems.</span>
<span id="cb48-230"><a href="#cb48-230" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb48-231"><a href="#cb48-231" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-234"><a href="#cb48-234" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb48-235"><a href="#cb48-235" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: injuries</span></span>
<span id="cb48-236"><a href="#cb48-236" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Countries with Highest Terrorism-Related Injuries (2012-2022)"</span></span>
<span id="cb48-237"><a href="#cb48-237" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb48-238"><a href="#cb48-238" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-239"><a href="#cb48-239" aria-hidden="true" tabindex="-1"></a>top_injuries <span class="ot">&lt;-</span> combined_raw_df <span class="sc">%&gt;%</span></span>
<span id="cb48-240"><a href="#cb48-240" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Country) <span class="sc">%&gt;%</span></span>
<span id="cb48-241"><a href="#cb48-241" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Total_Injuries =</span> <span class="fu">sum</span>(Injuries, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb48-242"><a href="#cb48-242" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Total_Injuries)) <span class="sc">%&gt;%</span></span>
<span id="cb48-243"><a href="#cb48-243" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">15</span>)</span>
<span id="cb48-244"><a href="#cb48-244" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-245"><a href="#cb48-245" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(top_injuries, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(Country, Total_Injuries), <span class="at">y =</span> Total_Injuries)) <span class="sc">+</span></span>
<span id="cb48-246"><a href="#cb48-246" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">fill =</span> <span class="st">"orange"</span>) <span class="sc">+</span></span>
<span id="cb48-247"><a href="#cb48-247" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add value labels at the end of each bar</span></span>
<span id="cb48-248"><a href="#cb48-248" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">format</span>(Total_Injuries, <span class="at">big.mark =</span> <span class="st">","</span>)), </span>
<span id="cb48-249"><a href="#cb48-249" aria-hidden="true" tabindex="-1"></a>            <span class="at">hjust =</span> <span class="sc">-</span><span class="fl">0.2</span>, <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">fontface =</span> <span class="st">"bold"</span>, <span class="at">size =</span> <span class="fl">3.5</span>) <span class="sc">+</span></span>
<span id="cb48-250"><a href="#cb48-250" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>(<span class="at">clip =</span> <span class="st">"off"</span>) <span class="sc">+</span>  <span class="co"># Prevent clipping of labels</span></span>
<span id="cb48-251"><a href="#cb48-251" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="cf">function</span>(x) <span class="fu">c</span>(<span class="dv">0</span>, x[<span class="dv">2</span>] <span class="sc">*</span> <span class="fl">1.1</span>)) <span class="sc">+</span>  <span class="co"># Expand y-axis to make room for labels</span></span>
<span id="cb48-252"><a href="#cb48-252" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Top 15 Countries by Total Injuries (2012–2022)"</span>,</span>
<span id="cb48-253"><a href="#cb48-253" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Country"</span>, <span class="at">y =</span> <span class="st">"Total Injuries"</span>) <span class="sc">+</span></span>
<span id="cb48-254"><a href="#cb48-254" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb48-255"><a href="#cb48-255" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb48-256"><a href="#cb48-256" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb48-257"><a href="#cb48-257" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb48-258"><a href="#cb48-258" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.margin =</span> <span class="fu">margin</span>(<span class="fl">5.5</span>, <span class="dv">30</span>, <span class="fl">5.5</span>, <span class="fl">5.5</span>)  <span class="co"># Add right margin for labels</span></span>
<span id="cb48-259"><a href="#cb48-259" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb48-260"><a href="#cb48-260" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb48-261"><a href="#cb48-261" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-262"><a href="#cb48-262" aria-hidden="true" tabindex="-1"></a><span class="fu">### 2.3.3. Top 15 Countries by Total Incidents {.section-header}</span></span>
<span id="cb48-263"><a href="#cb48-263" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-264"><a href="#cb48-264" aria-hidden="true" tabindex="-1"></a>::: description-box</span>
<span id="cb48-265"><a href="#cb48-265" aria-hidden="true" tabindex="-1"></a>The number of terrorist incidents provides a measure of the frequency of attacks, regardless of their scale. This visualization highlights countries experiencing the highest number of terrorism events during the study period.</span>
<span id="cb48-266"><a href="#cb48-266" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb48-267"><a href="#cb48-267" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-270"><a href="#cb48-270" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb48-271"><a href="#cb48-271" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: incidents</span></span>
<span id="cb48-272"><a href="#cb48-272" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Countries with Highest Number of Terrorist Incidents (2012-2022)"</span></span>
<span id="cb48-273"><a href="#cb48-273" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb48-274"><a href="#cb48-274" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-275"><a href="#cb48-275" aria-hidden="true" tabindex="-1"></a>top_incidents <span class="ot">&lt;-</span> combined_raw_df <span class="sc">%&gt;%</span></span>
<span id="cb48-276"><a href="#cb48-276" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Country) <span class="sc">%&gt;%</span></span>
<span id="cb48-277"><a href="#cb48-277" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Total_Incidents =</span> <span class="fu">sum</span>(Incidents, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb48-278"><a href="#cb48-278" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Total_Incidents)) <span class="sc">%&gt;%</span></span>
<span id="cb48-279"><a href="#cb48-279" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">15</span>)</span>
<span id="cb48-280"><a href="#cb48-280" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-281"><a href="#cb48-281" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(top_incidents, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(Country, Total_Incidents), <span class="at">y =</span> Total_Incidents)) <span class="sc">+</span></span>
<span id="cb48-282"><a href="#cb48-282" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">fill =</span> <span class="st">"steelblue"</span>) <span class="sc">+</span></span>
<span id="cb48-283"><a href="#cb48-283" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add value labels at the end of each bar</span></span>
<span id="cb48-284"><a href="#cb48-284" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">format</span>(Total_Incidents, <span class="at">big.mark =</span> <span class="st">","</span>)), </span>
<span id="cb48-285"><a href="#cb48-285" aria-hidden="true" tabindex="-1"></a>            <span class="at">hjust =</span> <span class="sc">-</span><span class="fl">0.2</span>, <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">fontface =</span> <span class="st">"bold"</span>, <span class="at">size =</span> <span class="fl">3.5</span>) <span class="sc">+</span></span>
<span id="cb48-286"><a href="#cb48-286" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>(<span class="at">clip =</span> <span class="st">"off"</span>) <span class="sc">+</span>  <span class="co"># Prevent clipping of labels</span></span>
<span id="cb48-287"><a href="#cb48-287" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="cf">function</span>(x) <span class="fu">c</span>(<span class="dv">0</span>, x[<span class="dv">2</span>] <span class="sc">*</span> <span class="fl">1.1</span>)) <span class="sc">+</span>  <span class="co"># Expand y-axis to make room for labels</span></span>
<span id="cb48-288"><a href="#cb48-288" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Top 15 Countries by Total Incidents (2012–2022)"</span>,</span>
<span id="cb48-289"><a href="#cb48-289" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Country"</span>, <span class="at">y =</span> <span class="st">"Total Incidents"</span>) <span class="sc">+</span></span>
<span id="cb48-290"><a href="#cb48-290" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb48-291"><a href="#cb48-291" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb48-292"><a href="#cb48-292" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb48-293"><a href="#cb48-293" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb48-294"><a href="#cb48-294" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.margin =</span> <span class="fu">margin</span>(<span class="fl">5.5</span>, <span class="dv">30</span>, <span class="fl">5.5</span>, <span class="fl">5.5</span>)  <span class="co"># Add right margin for labels</span></span>
<span id="cb48-295"><a href="#cb48-295" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb48-296"><a href="#cb48-296" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb48-297"><a href="#cb48-297" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-298"><a href="#cb48-298" aria-hidden="true" tabindex="-1"></a><span class="fu">### 2.3.4. Top 15 Countries by Total Hostages {.section-header}</span></span>
<span id="cb48-299"><a href="#cb48-299" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-302"><a href="#cb48-302" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb48-303"><a href="#cb48-303" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: hostages</span></span>
<span id="cb48-304"><a href="#cb48-304" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Countries with Highest Number of Hostages in Terrorist Incidents (2012-2022)"</span></span>
<span id="cb48-305"><a href="#cb48-305" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb48-306"><a href="#cb48-306" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-307"><a href="#cb48-307" aria-hidden="true" tabindex="-1"></a>top_hostages <span class="ot">&lt;-</span> combined_raw_df <span class="sc">%&gt;%</span></span>
<span id="cb48-308"><a href="#cb48-308" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Country) <span class="sc">%&gt;%</span></span>
<span id="cb48-309"><a href="#cb48-309" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Total_Hostages =</span> <span class="fu">sum</span>(Hostages, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb48-310"><a href="#cb48-310" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Total_Hostages)) <span class="sc">%&gt;%</span></span>
<span id="cb48-311"><a href="#cb48-311" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">15</span>)</span>
<span id="cb48-312"><a href="#cb48-312" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-313"><a href="#cb48-313" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(top_hostages, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(Country, Total_Hostages), <span class="at">y =</span> Total_Hostages)) <span class="sc">+</span></span>
<span id="cb48-314"><a href="#cb48-314" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">fill =</span> <span class="st">"purple"</span>) <span class="sc">+</span></span>
<span id="cb48-315"><a href="#cb48-315" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add value labels at the end of each bar</span></span>
<span id="cb48-316"><a href="#cb48-316" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">format</span>(Total_Hostages, <span class="at">big.mark =</span> <span class="st">","</span>)), </span>
<span id="cb48-317"><a href="#cb48-317" aria-hidden="true" tabindex="-1"></a>            <span class="at">hjust =</span> <span class="sc">-</span><span class="fl">0.2</span>, <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">fontface =</span> <span class="st">"bold"</span>, <span class="at">size =</span> <span class="fl">3.5</span>) <span class="sc">+</span></span>
<span id="cb48-318"><a href="#cb48-318" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>(<span class="at">clip =</span> <span class="st">"off"</span>) <span class="sc">+</span>  <span class="co"># Prevent clipping of labels</span></span>
<span id="cb48-319"><a href="#cb48-319" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="cf">function</span>(x) <span class="fu">c</span>(<span class="dv">0</span>, x[<span class="dv">2</span>] <span class="sc">*</span> <span class="fl">1.1</span>)) <span class="sc">+</span>  <span class="co"># Expand y-axis to make room for labels</span></span>
<span id="cb48-320"><a href="#cb48-320" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Top 15 Countries by Total Hostages (2012–2022)"</span>,</span>
<span id="cb48-321"><a href="#cb48-321" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Country"</span>, <span class="at">y =</span> <span class="st">"Total Hostages Taken"</span>) <span class="sc">+</span></span>
<span id="cb48-322"><a href="#cb48-322" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb48-323"><a href="#cb48-323" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb48-324"><a href="#cb48-324" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb48-325"><a href="#cb48-325" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb48-326"><a href="#cb48-326" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.margin =</span> <span class="fu">margin</span>(<span class="fl">5.5</span>, <span class="dv">30</span>, <span class="fl">5.5</span>, <span class="fl">5.5</span>)  <span class="co"># Add right margin for labels</span></span>
<span id="cb48-327"><a href="#cb48-327" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb48-328"><a href="#cb48-328" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb48-329"><a href="#cb48-329" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-330"><a href="#cb48-330" aria-hidden="true" tabindex="-1"></a>::: insight-box</span>
<span id="cb48-331"><a href="#cb48-331" aria-hidden="true" tabindex="-1"></a>**Key Insights from Impact Analysis:** &lt;br&gt; &lt;br&gt; • Fatalities: Iraq, Afghanistan, and Nigeria have suffered the highest number of terrorism-related deaths&lt;br&gt; • Injuries: Iraq and Afghanistan also lead in injuries, but Pakistan ranks higher in injuries than in fatalities&lt;br&gt; • Incidents: Iraq experiences the most terrorism incidents, followed by Afghanistan and Pakistan&lt;br&gt; • Hostages: Nigeria stands out with significantly more hostages than other countries, likely due to specific tactics used by terrorist groups operating there&lt;br&gt; • Different countries show different patterns of terrorism impact (e.g., some have high fatality-to-incident ratios while others show more incidents with fewer casualties)</span>
<span id="cb48-332"><a href="#cb48-332" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb48-333"><a href="#cb48-333" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-334"><a href="#cb48-334" aria-hidden="true" tabindex="-1"></a><span class="fu">## 2.4. Global Trends Over Time {.section-header}</span></span>
<span id="cb48-335"><a href="#cb48-335" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-336"><a href="#cb48-336" aria-hidden="true" tabindex="-1"></a>::: description-box</span>
<span id="cb48-337"><a href="#cb48-337" aria-hidden="true" tabindex="-1"></a>This visualization tracks the global yearly trends in terrorism impact, showing how fatalities, injuries, and hostage situations have evolved over the decade. This provides a macro-level view of global terrorism patterns.</span>
<span id="cb48-338"><a href="#cb48-338" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb48-339"><a href="#cb48-339" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-342"><a href="#cb48-342" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb48-343"><a href="#cb48-343" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: global-trends</span></span>
<span id="cb48-344"><a href="#cb48-344" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Global Yearly Trends in Terrorism Impact (2012-2022)"</span></span>
<span id="cb48-345"><a href="#cb48-345" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-346"><a href="#cb48-346" aria-hidden="true" tabindex="-1"></a>global_trend <span class="ot">&lt;-</span> combined_raw_df <span class="sc">%&gt;%</span></span>
<span id="cb48-347"><a href="#cb48-347" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Year) <span class="sc">%&gt;%</span></span>
<span id="cb48-348"><a href="#cb48-348" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Fatalities =</span> <span class="fu">sum</span>(Fatalities, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb48-349"><a href="#cb48-349" aria-hidden="true" tabindex="-1"></a>            <span class="at">Injuries =</span> <span class="fu">sum</span>(Injuries, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb48-350"><a href="#cb48-350" aria-hidden="true" tabindex="-1"></a>            <span class="at">Hostages =</span> <span class="fu">sum</span>(Hostages, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb48-351"><a href="#cb48-351" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-352"><a href="#cb48-352" aria-hidden="true" tabindex="-1"></a>global_trend_long <span class="ot">&lt;-</span> <span class="fu">pivot_longer</span>(global_trend, </span>
<span id="cb48-353"><a href="#cb48-353" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">cols =</span> <span class="fu">c</span>(<span class="st">"Fatalities"</span>, <span class="st">"Injuries"</span>, <span class="st">"Hostages"</span>),</span>
<span id="cb48-354"><a href="#cb48-354" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">names_to =</span> <span class="st">"Type"</span>, <span class="at">values_to =</span> <span class="st">"Count"</span>)</span>
<span id="cb48-355"><a href="#cb48-355" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-356"><a href="#cb48-356" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(global_trend_long, <span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> Count, <span class="at">color =</span> Type)) <span class="sc">+</span></span>
<span id="cb48-357"><a href="#cb48-357" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="fl">1.2</span>) <span class="sc">+</span></span>
<span id="cb48-358"><a href="#cb48-358" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Global Trends: Fatalities, Injuries, Hostages (2012–2022)"</span>,</span>
<span id="cb48-359"><a href="#cb48-359" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Year"</span>, <span class="at">y =</span> <span class="st">"Count"</span>, <span class="at">color =</span> <span class="st">"Type"</span>) <span class="sc">+</span></span>
<span id="cb48-360"><a href="#cb48-360" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span>
<span id="cb48-361"><a href="#cb48-361" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb48-362"><a href="#cb48-362" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb48-363"><a href="#cb48-363" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"bottom"</span>,</span>
<span id="cb48-364"><a href="#cb48-364" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>)</span>
<span id="cb48-365"><a href="#cb48-365" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb48-366"><a href="#cb48-366" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb48-367"><a href="#cb48-367" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-368"><a href="#cb48-368" aria-hidden="true" tabindex="-1"></a>::: insight-box</span>
<span id="cb48-369"><a href="#cb48-369" aria-hidden="true" tabindex="-1"></a>**Key Global Trends:**&lt;br&gt; &lt;br&gt; • The period around 2014-2015 shows a significant peak in both fatalities and injuries, corresponding to the rise of ISIS&lt;br&gt; • Since 2015, there has been a general downward trend in all three impact measures&lt;br&gt; • Hostage situations follow a different pattern than fatalities and injuries, with distinct peaks&lt;br&gt; • Recent years show some stabilization at lower levels compared to the mid-decade peak</span>
<span id="cb48-370"><a href="#cb48-370" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb48-371"><a href="#cb48-371" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-372"><a href="#cb48-372" aria-hidden="true" tabindex="-1"></a><span class="fu">## 2.5. Multi-Dimensional Analysis {.section-header}</span></span>
<span id="cb48-373"><a href="#cb48-373" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-374"><a href="#cb48-374" aria-hidden="true" tabindex="-1"></a>::: description-box</span>
<span id="cb48-375"><a href="#cb48-375" aria-hidden="true" tabindex="-1"></a>This bubble chart provides a multi-dimensional view of terrorism impact, plotting fatalities against injuries while using bubble size to represent the average GTI score. This visualization helps identify countries that are disproportionately affected across different impact measures.</span>
<span id="cb48-376"><a href="#cb48-376" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb48-377"><a href="#cb48-377" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-380"><a href="#cb48-380" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb48-381"><a href="#cb48-381" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: bubble-chart</span></span>
<span id="cb48-382"><a href="#cb48-382" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Multi-Dimensional Analysis of Terrorism Impact by Country (2012-2022)"</span></span>
<span id="cb48-383"><a href="#cb48-383" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 11</span></span>
<span id="cb48-384"><a href="#cb48-384" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 8</span></span>
<span id="cb48-385"><a href="#cb48-385" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-386"><a href="#cb48-386" aria-hidden="true" tabindex="-1"></a>bubble_data <span class="ot">&lt;-</span> combined_raw_df <span class="sc">%&gt;%</span></span>
<span id="cb48-387"><a href="#cb48-387" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Country) <span class="sc">%&gt;%</span></span>
<span id="cb48-388"><a href="#cb48-388" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Fatalities =</span> <span class="fu">sum</span>(Fatalities, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb48-389"><a href="#cb48-389" aria-hidden="true" tabindex="-1"></a>            <span class="at">Injuries =</span> <span class="fu">sum</span>(Injuries, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb48-390"><a href="#cb48-390" aria-hidden="true" tabindex="-1"></a>            <span class="at">GTI =</span> <span class="fu">mean</span>(Score, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb48-391"><a href="#cb48-391" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Fatalities <span class="sc">&gt;</span> <span class="dv">0</span> <span class="sc">&amp;</span> Injuries <span class="sc">&gt;</span> <span class="dv">0</span>)</span>
<span id="cb48-392"><a href="#cb48-392" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-393"><a href="#cb48-393" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(bubble_data, <span class="fu">aes</span>(<span class="at">x =</span> Fatalities, <span class="at">y =</span> Injuries, <span class="at">size =</span> GTI, <span class="at">label =</span> Country)) <span class="sc">+</span></span>
<span id="cb48-394"><a href="#cb48-394" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.6</span>, <span class="at">color =</span> <span class="st">"darkblue"</span>) <span class="sc">+</span></span>
<span id="cb48-395"><a href="#cb48-395" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">check_overlap =</span> <span class="cn">TRUE</span>, <span class="at">size =</span> <span class="dv">3</span>, <span class="at">vjust =</span> <span class="fl">1.5</span>) <span class="sc">+</span></span>
<span id="cb48-396"><a href="#cb48-396" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_size_continuous</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">10</span>)) <span class="sc">+</span></span>
<span id="cb48-397"><a href="#cb48-397" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Bubble Chart: Fatalities vs Injuries by Country"</span>,</span>
<span id="cb48-398"><a href="#cb48-398" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Total Fatalities"</span>, <span class="at">y =</span> <span class="st">"Total Injuries"</span>, <span class="at">size =</span> <span class="st">"Avg. GTI Score"</span>) <span class="sc">+</span></span>
<span id="cb48-399"><a href="#cb48-399" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span>
<span id="cb48-400"><a href="#cb48-400" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb48-401"><a href="#cb48-401" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb48-402"><a href="#cb48-402" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb48-403"><a href="#cb48-403" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"right"</span></span>
<span id="cb48-404"><a href="#cb48-404" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb48-405"><a href="#cb48-405" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb48-406"><a href="#cb48-406" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-407"><a href="#cb48-407" aria-hidden="true" tabindex="-1"></a>::: insight-box</span>
<span id="cb48-408"><a href="#cb48-408" aria-hidden="true" tabindex="-1"></a>**Key Insights from Multi-Dimensional Analysis:**&lt;br&gt; &lt;br&gt; • Iraq and Afghanistan stand as extreme outliers, with exceptionally high values across all three dimensions&lt;br&gt; • Most countries cluster in the lower ranges for both fatalities and injuries&lt;br&gt; • Some countries show disproportionate ratios between fatalities and injuries&lt;br&gt; • The relationship between GTI score and casualty figures is generally consistent, with higher casualties correlating with higher GTI scores&lt;br&gt; • A few countries have relatively high GTI scores despite moderate casualty figures, suggesting other factors (like property damage or psychological impact) influence their GTI ranking</span>
<span id="cb48-409"><a href="#cb48-409" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb48-410"><a href="#cb48-410" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-411"><a href="#cb48-411" aria-hidden="true" tabindex="-1"></a><span class="fu"># 3. Data Pre-Processing {.section-header}</span></span>
<span id="cb48-412"><a href="#cb48-412" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-413"><a href="#cb48-413" aria-hidden="true" tabindex="-1"></a>::: description-box</span>
<span id="cb48-414"><a href="#cb48-414" aria-hidden="true" tabindex="-1"></a>**Key Metric: Fatality Rate**&lt;br&gt;&lt;br&gt; • **Definition:** Average deaths per attack = Fatalities ÷ Incidents.&lt;br&gt; • **Why it matters:** Normalizes for attack frequency so you can compare how deadly incidents are across countries and over time.&lt;br&gt; • **Interpretation:** An increasing rate signals more severe attacks or reduced survivability; a declining rate suggests less-lethal tactics or improved emergency response.</span>
<span id="cb48-415"><a href="#cb48-415" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb48-416"><a href="#cb48-416" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-417"><a href="#cb48-417" aria-hidden="true" tabindex="-1"></a><span class="fu">## 3.1. Data Ingestion {.subsection-header}</span></span>
<span id="cb48-418"><a href="#cb48-418" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-419"><a href="#cb48-419" aria-hidden="true" tabindex="-1"></a>::: description-box</span>
<span id="cb48-420"><a href="#cb48-420" aria-hidden="true" tabindex="-1"></a>**Data Ingestion:** Load the raw “Combined raw” sheet into R using <span class="in">`read_excel`</span>, preserving the original structure so we can inspect and verify the incoming data before any transformations.</span>
<span id="cb48-421"><a href="#cb48-421" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb48-422"><a href="#cb48-422" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-423"><a href="#cb48-423" aria-hidden="true" tabindex="-1"></a><span class="in">```{r load-raw, echo=TRUE}</span></span>
<span id="cb48-424"><a href="#cb48-424" aria-hidden="true" tabindex="-1"></a><span class="in">library(readxl)</span></span>
<span id="cb48-425"><a href="#cb48-425" aria-hidden="true" tabindex="-1"></a><span class="in">data_path &lt;- "data/Global Terrorism Index 2023.xlsx"</span></span>
<span id="cb48-426"><a href="#cb48-426" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-427"><a href="#cb48-427" aria-hidden="true" tabindex="-1"></a><span class="in">raw_df &lt;- read_excel(data_path, sheet = "Combined raw")</span></span>
<span id="cb48-428"><a href="#cb48-428" aria-hidden="true" tabindex="-1"></a><span class="in">head(raw_df)</span></span>
<span id="cb48-429"><a href="#cb48-429" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb48-430"><a href="#cb48-430" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-431"><a href="#cb48-431" aria-hidden="true" tabindex="-1"></a>::: insight-box</span>
<span id="cb48-432"><a href="#cb48-432" aria-hidden="true" tabindex="-1"></a>**Initial Data Snapshot:**&lt;br&gt;&lt;br&gt; - The raw “Combined raw” sheet contains 9 columns: <span class="in">`iso3c`</span>, <span class="in">`Country`</span>, <span class="in">`Rank`</span>, <span class="in">`Score`</span>, <span class="in">`Incidents`</span>, <span class="in">`Fatalities`</span>, <span class="in">`Injuries`</span>, <span class="in">`Hostages`</span>, and <span class="in">`Year`</span>.&lt;br&gt; - The first six rows for 2012 list Iraq, Pakistan, Afghanistan, Syria, Yemen, and Nigeria—showing their 2012 GTI rank, score, and casualty figures.&lt;br&gt; - Confirms successful ingestion and expected structure before any cleaning or transformation.</span>
<span id="cb48-433"><a href="#cb48-433" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb48-434"><a href="#cb48-434" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-435"><a href="#cb48-435" aria-hidden="true" tabindex="-1"></a><span class="fu">## 3.2. Cleaning &amp; Normalization {.subsection-header}</span></span>
<span id="cb48-436"><a href="#cb48-436" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-437"><a href="#cb48-437" aria-hidden="true" tabindex="-1"></a>::: description-box</span>
<span id="cb48-438"><a href="#cb48-438" aria-hidden="true" tabindex="-1"></a>**Cleaning &amp; Normalization:** Standardize column names to snake_case, remove empty or “Total” rows, trim whitespace in <span class="in">`country`</span>, convert all metric columns (<span class="in">`incidents`</span>, <span class="in">`fatalities`</span>, <span class="in">`injuries`</span>, <span class="in">`hostages`</span>, <span class="in">`score`</span>) to numeric types, replace any missing values with zeros, and drop exact duplicate rows to ensure a consistent dataset.</span>
<span id="cb48-439"><a href="#cb48-439" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb48-440"><a href="#cb48-440" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-441"><a href="#cb48-441" aria-hidden="true" tabindex="-1"></a><span class="in">```{r clean-raw, echo=TRUE}</span></span>
<span id="cb48-442"><a href="#cb48-442" aria-hidden="true" tabindex="-1"></a><span class="in">library(dplyr)</span></span>
<span id="cb48-443"><a href="#cb48-443" aria-hidden="true" tabindex="-1"></a><span class="in">library(janitor)</span></span>
<span id="cb48-444"><a href="#cb48-444" aria-hidden="true" tabindex="-1"></a><span class="in">library(stringr)</span></span>
<span id="cb48-445"><a href="#cb48-445" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-446"><a href="#cb48-446" aria-hidden="true" tabindex="-1"></a><span class="in">clean_df &lt;- raw_df %&gt;%</span></span>
<span id="cb48-447"><a href="#cb48-447" aria-hidden="true" tabindex="-1"></a><span class="in">  clean_names() %&gt;%                                 # snake_case column names</span></span>
<span id="cb48-448"><a href="#cb48-448" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(</span></span>
<span id="cb48-449"><a href="#cb48-449" aria-hidden="true" tabindex="-1"></a><span class="in">    !is.na(country),</span></span>
<span id="cb48-450"><a href="#cb48-450" aria-hidden="true" tabindex="-1"></a><span class="in">    country != "",</span></span>
<span id="cb48-451"><a href="#cb48-451" aria-hidden="true" tabindex="-1"></a><span class="in">    !str_detect(country, regex("total|all", ignore_case = TRUE))</span></span>
<span id="cb48-452"><a href="#cb48-452" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;%</span></span>
<span id="cb48-453"><a href="#cb48-453" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb48-454"><a href="#cb48-454" aria-hidden="true" tabindex="-1"></a><span class="in">    country    = str_squish(country),               # trim extra spaces</span></span>
<span id="cb48-455"><a href="#cb48-455" aria-hidden="true" tabindex="-1"></a><span class="in">    year       = as.integer(year),</span></span>
<span id="cb48-456"><a href="#cb48-456" aria-hidden="true" tabindex="-1"></a><span class="in">    incidents  = as.numeric(incidents),</span></span>
<span id="cb48-457"><a href="#cb48-457" aria-hidden="true" tabindex="-1"></a><span class="in">    fatalities = as.numeric(fatalities),</span></span>
<span id="cb48-458"><a href="#cb48-458" aria-hidden="true" tabindex="-1"></a><span class="in">    injuries   = as.numeric(injuries),</span></span>
<span id="cb48-459"><a href="#cb48-459" aria-hidden="true" tabindex="-1"></a><span class="in">    hostages   = as.numeric(hostages),</span></span>
<span id="cb48-460"><a href="#cb48-460" aria-hidden="true" tabindex="-1"></a><span class="in">    score      = as.numeric(score)</span></span>
<span id="cb48-461"><a href="#cb48-461" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;%</span></span>
<span id="cb48-462"><a href="#cb48-462" aria-hidden="true" tabindex="-1"></a><span class="in">  replace_na(list(                                  # missing counts → 0</span></span>
<span id="cb48-463"><a href="#cb48-463" aria-hidden="true" tabindex="-1"></a><span class="in">    incidents  = 0,</span></span>
<span id="cb48-464"><a href="#cb48-464" aria-hidden="true" tabindex="-1"></a><span class="in">    fatalities = 0,</span></span>
<span id="cb48-465"><a href="#cb48-465" aria-hidden="true" tabindex="-1"></a><span class="in">    injuries   = 0,</span></span>
<span id="cb48-466"><a href="#cb48-466" aria-hidden="true" tabindex="-1"></a><span class="in">    hostages   = 0</span></span>
<span id="cb48-467"><a href="#cb48-467" aria-hidden="true" tabindex="-1"></a><span class="in">  )) %&gt;%</span></span>
<span id="cb48-468"><a href="#cb48-468" aria-hidden="true" tabindex="-1"></a><span class="in">  distinct(country, year, .keep_all = TRUE)         # drop exact duplicates</span></span>
<span id="cb48-469"><a href="#cb48-469" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-470"><a href="#cb48-470" aria-hidden="true" tabindex="-1"></a><span class="in">head(clean_df)</span></span>
<span id="cb48-471"><a href="#cb48-471" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb48-472"><a href="#cb48-472" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-473"><a href="#cb48-473" aria-hidden="true" tabindex="-1"></a><span class="fu">## 3.3. Post-cleaning Validation {.subsection-header}</span></span>
<span id="cb48-474"><a href="#cb48-474" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-475"><a href="#cb48-475" aria-hidden="true" tabindex="-1"></a>::: description-box</span>
<span id="cb48-476"><a href="#cb48-476" aria-hidden="true" tabindex="-1"></a>**Validate Cleaning Results:** Verify that column types, row counts, and missing‐value replacements are as expected. We compare before/after dimensions, check for duplicates, and summarize any remaining <span class="in">`NA`</span>s.</span>
<span id="cb48-477"><a href="#cb48-477" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb48-478"><a href="#cb48-478" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-479"><a href="#cb48-479" aria-hidden="true" tabindex="-1"></a><span class="in">```{r validate-cleaning, echo=TRUE}</span></span>
<span id="cb48-480"><a href="#cb48-480" aria-hidden="true" tabindex="-1"></a><span class="in">library(dplyr)</span></span>
<span id="cb48-481"><a href="#cb48-481" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-482"><a href="#cb48-482" aria-hidden="true" tabindex="-1"></a><span class="in"># 1. Compare dimensions before &amp; after</span></span>
<span id="cb48-483"><a href="#cb48-483" aria-hidden="true" tabindex="-1"></a><span class="in">cat("Raw rows:", nrow(raw_df), "→ Clean rows:", nrow(clean_df), "\n")</span></span>
<span id="cb48-484"><a href="#cb48-484" aria-hidden="true" tabindex="-1"></a><span class="in">cat("Raw cols:", ncol(raw_df), "→ Clean cols:", ncol(clean_df), "\n\n")</span></span>
<span id="cb48-485"><a href="#cb48-485" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-486"><a href="#cb48-486" aria-hidden="true" tabindex="-1"></a><span class="in"># 2. Check for any duplicate rows remaining</span></span>
<span id="cb48-487"><a href="#cb48-487" aria-hidden="true" tabindex="-1"></a><span class="in">cat("Duplicates in clean_df:", sum(duplicated(clean_df)), "\n\n")</span></span>
<span id="cb48-488"><a href="#cb48-488" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-489"><a href="#cb48-489" aria-hidden="true" tabindex="-1"></a><span class="in"># 3. Summarize NA counts by column</span></span>
<span id="cb48-490"><a href="#cb48-490" aria-hidden="true" tabindex="-1"></a><span class="in">na_summary &lt;- clean_df %&gt;%</span></span>
<span id="cb48-491"><a href="#cb48-491" aria-hidden="true" tabindex="-1"></a><span class="in">  summarise(across(everything(), ~ sum(is.na(.))))</span></span>
<span id="cb48-492"><a href="#cb48-492" aria-hidden="true" tabindex="-1"></a><span class="in">print(na_summary)</span></span>
<span id="cb48-493"><a href="#cb48-493" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-494"><a href="#cb48-494" aria-hidden="true" tabindex="-1"></a><span class="in"># 4. Glimpse the cleaned structure</span></span>
<span id="cb48-495"><a href="#cb48-495" aria-hidden="true" tabindex="-1"></a><span class="in">glimpse(clean_df)</span></span>
<span id="cb48-496"><a href="#cb48-496" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb48-497"><a href="#cb48-497" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-498"><a href="#cb48-498" aria-hidden="true" tabindex="-1"></a>::: insight-box</span>
<span id="cb48-499"><a href="#cb48-499" aria-hidden="true" tabindex="-1"></a>**Post-Cleaning Validation:**&lt;br&gt;&lt;br&gt; • **Row &amp; Column Consistency:** Retained all 1,793 rows and 9 columns—no unintended data loss.&lt;br&gt;\</span>
<span id="cb48-500"><a href="#cb48-500" aria-hidden="true" tabindex="-1"></a>• **Duplicates Removed:** Zero duplicate entries, ensuring each country–year is unique.&lt;br&gt;\</span>
<span id="cb48-501"><a href="#cb48-501" aria-hidden="true" tabindex="-1"></a>• **No Missing Values:** All <span class="in">`incidents`</span>, <span class="in">`fatalities`</span>, <span class="in">`injuries`</span>, and <span class="in">`hostages`</span> fields now have zero NAs.&lt;br&gt;\</span>
<span id="cb48-502"><a href="#cb48-502" aria-hidden="true" tabindex="-1"></a>• **Correct Data Types:** <span class="in">`year`</span> is integer and all metric columns are numeric, ready for reliable aggregation and analysis.</span>
<span id="cb48-503"><a href="#cb48-503" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb48-504"><a href="#cb48-504" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-505"><a href="#cb48-505" aria-hidden="true" tabindex="-1"></a><span class="fu">## 3.4. Filtering &amp; Period Selection {.subsection-header}</span></span>
<span id="cb48-506"><a href="#cb48-506" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-507"><a href="#cb48-507" aria-hidden="true" tabindex="-1"></a>::: description-box</span>
<span id="cb48-508"><a href="#cb48-508" aria-hidden="true" tabindex="-1"></a>**Filtering &amp; Period Selection:** Restrict the cleaned dataset to the years 2012–2022 (inclusive), so that all subsequent analysis focuses on our target time window.</span>
<span id="cb48-509"><a href="#cb48-509" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb48-510"><a href="#cb48-510" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-511"><a href="#cb48-511" aria-hidden="true" tabindex="-1"></a><span class="in">```{r filter-years, echo=TRUE}</span></span>
<span id="cb48-512"><a href="#cb48-512" aria-hidden="true" tabindex="-1"></a><span class="in"># 1. Keep only 2012 through 2022</span></span>
<span id="cb48-513"><a href="#cb48-513" aria-hidden="true" tabindex="-1"></a><span class="in">combined_raw_df &lt;- clean_df %&gt;%</span></span>
<span id="cb48-514"><a href="#cb48-514" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(year &gt;= 2012, year &lt;= 2022)</span></span>
<span id="cb48-515"><a href="#cb48-515" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-516"><a href="#cb48-516" aria-hidden="true" tabindex="-1"></a><span class="in"># 2. Verify the operation</span></span>
<span id="cb48-517"><a href="#cb48-517" aria-hidden="true" tabindex="-1"></a><span class="in">cat("Year range after filter:", range(combined_raw_df$year), "\n")</span></span>
<span id="cb48-518"><a href="#cb48-518" aria-hidden="true" tabindex="-1"></a><span class="in">head(combined_raw_df)</span></span>
<span id="cb48-519"><a href="#cb48-519" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb48-520"><a href="#cb48-520" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-521"><a href="#cb48-521" aria-hidden="true" tabindex="-1"></a>::: insight-box</span>
<span id="cb48-522"><a href="#cb48-522" aria-hidden="true" tabindex="-1"></a>**Period Selection Validation:**&lt;br&gt;&lt;br&gt; • Dataset now spans only the years **2012 through 2022** as intended.&lt;br&gt; • Confirms our analysis will focus on a consistent 11-year window.&lt;br&gt; • Underlying record count remains unchanged, preserving full coverage within this period.</span>
<span id="cb48-523"><a href="#cb48-523" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb48-524"><a href="#cb48-524" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-525"><a href="#cb48-525" aria-hidden="true" tabindex="-1"></a><span class="fu">## 3.5. Selecting Top 8 Countries by Total Fatalities {.subsection-header}</span></span>
<span id="cb48-526"><a href="#cb48-526" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-527"><a href="#cb48-527" aria-hidden="true" tabindex="-1"></a>::: description-box</span>
<span id="cb48-528"><a href="#cb48-528" aria-hidden="true" tabindex="-1"></a>Identify the eight countries with the highest cumulative fatalities and keep only their records.</span>
<span id="cb48-529"><a href="#cb48-529" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb48-530"><a href="#cb48-530" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-531"><a href="#cb48-531" aria-hidden="true" tabindex="-1"></a><span class="in">```{r select-top8-by-deaths, echo=TRUE}</span></span>
<span id="cb48-532"><a href="#cb48-532" aria-hidden="true" tabindex="-1"></a><span class="in">top8_countries &lt;- combined_raw_df %&gt;%</span></span>
<span id="cb48-533"><a href="#cb48-533" aria-hidden="true" tabindex="-1"></a><span class="in">  group_by(country) %&gt;%</span></span>
<span id="cb48-534"><a href="#cb48-534" aria-hidden="true" tabindex="-1"></a><span class="in">  summarise(total_fatalities = sum(fatalities, na.rm=TRUE), .groups="drop") %&gt;%</span></span>
<span id="cb48-535"><a href="#cb48-535" aria-hidden="true" tabindex="-1"></a><span class="in">  slice_max(total_fatalities, n=8) %&gt;%</span></span>
<span id="cb48-536"><a href="#cb48-536" aria-hidden="true" tabindex="-1"></a><span class="in">  pull(country)</span></span>
<span id="cb48-537"><a href="#cb48-537" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-538"><a href="#cb48-538" aria-hidden="true" tabindex="-1"></a><span class="in">filtered_df &lt;- combined_raw_df %&gt;%</span></span>
<span id="cb48-539"><a href="#cb48-539" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(country %in% top8_countries)</span></span>
<span id="cb48-540"><a href="#cb48-540" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-541"><a href="#cb48-541" aria-hidden="true" tabindex="-1"></a><span class="in">top8_countries</span></span>
<span id="cb48-542"><a href="#cb48-542" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb48-543"><a href="#cb48-543" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-544"><a href="#cb48-544" aria-hidden="true" tabindex="-1"></a>::: insight-box</span>
<span id="cb48-545"><a href="#cb48-545" aria-hidden="true" tabindex="-1"></a>**Top 8 Countries by Total Fatalities (2012–2022):**\</span>
<span id="cb48-546"><a href="#cb48-546" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Iraq**, **Afghanistan**, **Nigeria**, **Syria**, and **Pakistan** consistently record the highest terrorism-related death tolls each year (<span class="co">[</span><span class="ot">IEP GTI map</span><span class="co">](https://www.visionofhumanity.org/maps/global-terrorism-index/)</span> :contentReference<span class="co">[</span><span class="ot">oaicite:0</span><span class="co">]</span>{index="0"}).\</span>
<span id="cb48-547"><a href="#cb48-547" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Somalia** remains among the worst-hit due to the persistent al-Shabaab insurgency and large-scale attacks (<span class="co">[</span><span class="ot">UN experts report</span><span class="co">](https://apnews.com/article/162c899b2ed71c7be1724eb03ece772b)</span> :contentReference<span class="co">[</span><span class="ot">oaicite:1</span><span class="co">]</span>{index="1"}).\</span>
<span id="cb48-548"><a href="#cb48-548" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Burkina Faso** and **Mali** have surged into the top eight as jihadist violence in the Sahel intensifies—this region now accounts for over 40 % of global terrorism fatalities (<span class="co">[</span><span class="ot">GTI 2024 Briefing PDF</span><span class="co">](https://www.economicsandpeace.org/wp-content/uploads/2024/02/GTI-2024-web-290224.pdf)</span> :contentReference<span class="co">[</span><span class="ot">oaicite:2</span><span class="co">]</span>{index="2"}).</span>
<span id="cb48-549"><a href="#cb48-549" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb48-550"><a href="#cb48-550" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-551"><a href="#cb48-551" aria-hidden="true" tabindex="-1"></a><span class="fu">## 3.6. Summarise Annual Fatalities {.subsection-header}</span></span>
<span id="cb48-552"><a href="#cb48-552" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-553"><a href="#cb48-553" aria-hidden="true" tabindex="-1"></a>::: description-box</span>
<span id="cb48-554"><a href="#cb48-554" aria-hidden="true" tabindex="-1"></a>**Summarise Annual Fatalities:** Aggregate total fatalities by country and year for our selected top-8 countries, convert counts into “thousands,” and print the full 2012–2022 series.</span>
<span id="cb48-555"><a href="#cb48-555" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb48-556"><a href="#cb48-556" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-557"><a href="#cb48-557" aria-hidden="true" tabindex="-1"></a><span class="in">```{r summarise-annual, echo=TRUE}</span></span>
<span id="cb48-558"><a href="#cb48-558" aria-hidden="true" tabindex="-1"></a><span class="in">library(dplyr)</span></span>
<span id="cb48-559"><a href="#cb48-559" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-560"><a href="#cb48-560" aria-hidden="true" tabindex="-1"></a><span class="in">annual_fat_df &lt;- filtered_df %&gt;%</span></span>
<span id="cb48-561"><a href="#cb48-561" aria-hidden="true" tabindex="-1"></a><span class="in">  group_by(country, year) %&gt;%</span></span>
<span id="cb48-562"><a href="#cb48-562" aria-hidden="true" tabindex="-1"></a><span class="in">  summarise(</span></span>
<span id="cb48-563"><a href="#cb48-563" aria-hidden="true" tabindex="-1"></a><span class="in">    annual_fatalities = sum(fatalities, na.rm = TRUE),</span></span>
<span id="cb48-564"><a href="#cb48-564" aria-hidden="true" tabindex="-1"></a><span class="in">    .groups = "drop"</span></span>
<span id="cb48-565"><a href="#cb48-565" aria-hidden="true" tabindex="-1"></a><span class="in">  ) %&gt;%</span></span>
<span id="cb48-566"><a href="#cb48-566" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb48-567"><a href="#cb48-567" aria-hidden="true" tabindex="-1"></a><span class="in">    fatalities_k = annual_fatalities / 1000</span></span>
<span id="cb48-568"><a href="#cb48-568" aria-hidden="true" tabindex="-1"></a><span class="in">  )</span></span>
<span id="cb48-569"><a href="#cb48-569" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-570"><a href="#cb48-570" aria-hidden="true" tabindex="-1"></a><span class="in"># Print all 88 rows to verify</span></span>
<span id="cb48-571"><a href="#cb48-571" aria-hidden="true" tabindex="-1"></a><span class="in">print(annual_fat_df, n = nrow(annual_fat_df))</span></span>
<span id="cb48-572"><a href="#cb48-572" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb48-573"><a href="#cb48-573" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-574"><a href="#cb48-574" aria-hidden="true" tabindex="-1"></a>::: insight-box</span>
<span id="cb48-575"><a href="#cb48-575" aria-hidden="true" tabindex="-1"></a>**Fatality Rate Calculation:**\</span>
<span id="cb48-576"><a href="#cb48-576" aria-hidden="true" tabindex="-1"></a>• Groups the top-8 countries by <span class="in">`country`</span> and <span class="in">`year`</span>.\</span>
<span id="cb48-577"><a href="#cb48-577" aria-hidden="true" tabindex="-1"></a>• Sums <span class="in">`total_fatalities`</span> and <span class="in">`total_incidents`</span>.\</span>
<span id="cb48-578"><a href="#cb48-578" aria-hidden="true" tabindex="-1"></a>• Drops years with zero incidents to avoid undefined rates.\</span>
<span id="cb48-579"><a href="#cb48-579" aria-hidden="true" tabindex="-1"></a>• Computes <span class="in">`fatality_rate = total_fatalities / total_incidents`</span>.\</span>
<span id="cb48-580"><a href="#cb48-580" aria-hidden="true" tabindex="-1"></a>• Prints all 88 rows (2012–2022) so you can verify every country–year rate before plotting.</span>
<span id="cb48-581"><a href="#cb48-581" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb48-582"><a href="#cb48-582" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-583"><a href="#cb48-583" aria-hidden="true" tabindex="-1"></a><span class="fu"># 4. Visualizing Annual Fatalities {.section-header}</span></span>
<span id="cb48-584"><a href="#cb48-584" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-585"><a href="#cb48-585" aria-hidden="true" tabindex="-1"></a>::: description-box</span>
<span id="cb48-586"><a href="#cb48-586" aria-hidden="true" tabindex="-1"></a>**Visualizing Annual Fatalities:** A stacked‐area chart showing total yearly fatalities (in thousands) for our top 8 countries over 2012–2022.</span>
<span id="cb48-587"><a href="#cb48-587" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb48-588"><a href="#cb48-588" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-589"><a href="#cb48-589" aria-hidden="true" tabindex="-1"></a><span class="in">```{r plot-isis-with-2020-rebound-fixed, echo=FALSE, fig.cap="Top 8 Countries: Terrorism Fatalities (2012–2022) – ISIS Surge &amp; Decline plus 2020 Rebound (Fixed)"}</span></span>
<span id="cb48-590"><a href="#cb48-590" aria-hidden="true" tabindex="-1"></a><span class="in">library(dplyr)</span></span>
<span id="cb48-591"><a href="#cb48-591" aria-hidden="true" tabindex="-1"></a><span class="in">library(ggplot2)</span></span>
<span id="cb48-592"><a href="#cb48-592" aria-hidden="true" tabindex="-1"></a><span class="in">library(scales)</span></span>
<span id="cb48-593"><a href="#cb48-593" aria-hidden="true" tabindex="-1"></a><span class="in">library(tibble)</span></span>
<span id="cb48-594"><a href="#cb48-594" aria-hidden="true" tabindex="-1"></a><span class="in">library(grid)</span></span>
<span id="cb48-595"><a href="#cb48-595" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-596"><a href="#cb48-596" aria-hidden="true" tabindex="-1"></a><span class="in"># 1) Data prep</span></span>
<span id="cb48-597"><a href="#cb48-597" aria-hidden="true" tabindex="-1"></a><span class="in">df &lt;- filtered_df %&gt;%</span></span>
<span id="cb48-598"><a href="#cb48-598" aria-hidden="true" tabindex="-1"></a><span class="in">  group_by(country, year) %&gt;%</span></span>
<span id="cb48-599"><a href="#cb48-599" aria-hidden="true" tabindex="-1"></a><span class="in">  summarise(fatalities_k = sum(fatalities, na.rm = TRUE) / 1000, .groups = "drop")</span></span>
<span id="cb48-600"><a href="#cb48-600" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-601"><a href="#cb48-601" aria-hidden="true" tabindex="-1"></a><span class="in"># 2) Stack ordering</span></span>
<span id="cb48-602"><a href="#cb48-602" aria-hidden="true" tabindex="-1"></a><span class="in">order_levels &lt;- df %&gt;%</span></span>
<span id="cb48-603"><a href="#cb48-603" aria-hidden="true" tabindex="-1"></a><span class="in">  group_by(country) %&gt;%</span></span>
<span id="cb48-604"><a href="#cb48-604" aria-hidden="true" tabindex="-1"></a><span class="in">  summarise(total = sum(fatalities_k), .groups = "drop") %&gt;%</span></span>
<span id="cb48-605"><a href="#cb48-605" aria-hidden="true" tabindex="-1"></a><span class="in">  arrange(total) %&gt;%</span></span>
<span id="cb48-606"><a href="#cb48-606" aria-hidden="true" tabindex="-1"></a><span class="in">  pull(country)</span></span>
<span id="cb48-607"><a href="#cb48-607" aria-hidden="true" tabindex="-1"></a><span class="in">df$country &lt;- factor(df$country, levels = order_levels)</span></span>
<span id="cb48-608"><a href="#cb48-608" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-609"><a href="#cb48-609" aria-hidden="true" tabindex="-1"></a><span class="in"># 3) Compute global totals</span></span>
<span id="cb48-610"><a href="#cb48-610" aria-hidden="true" tabindex="-1"></a><span class="in">top_k &lt;- df %&gt;%</span></span>
<span id="cb48-611"><a href="#cb48-611" aria-hidden="true" tabindex="-1"></a><span class="in">  group_by(year) %&gt;%</span></span>
<span id="cb48-612"><a href="#cb48-612" aria-hidden="true" tabindex="-1"></a><span class="in">  summarise(global_k = sum(fatalities_k), .groups = "drop")</span></span>
<span id="cb48-613"><a href="#cb48-613" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-614"><a href="#cb48-614" aria-hidden="true" tabindex="-1"></a><span class="in"># 4) Anchor annotation data (2013, 2016 &amp; 2019)</span></span>
<span id="cb48-615"><a href="#cb48-615" aria-hidden="true" tabindex="-1"></a><span class="in">annot_years &lt;- top_k %&gt;%</span></span>
<span id="cb48-616"><a href="#cb48-616" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(year %in% c(2013, 2016, 2019)) %&gt;%</span></span>
<span id="cb48-617"><a href="#cb48-617" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(label = case_when(</span></span>
<span id="cb48-618"><a href="#cb48-618" aria-hidden="true" tabindex="-1"></a><span class="in">    year == 2013 ~ paste0("Peak: ", round(global_k, 1), " k"),</span></span>
<span id="cb48-619"><a href="#cb48-619" aria-hidden="true" tabindex="-1"></a><span class="in">    TRUE         ~ paste0(round(global_k, 1), " k")</span></span>
<span id="cb48-620"><a href="#cb48-620" aria-hidden="true" tabindex="-1"></a><span class="in">  ))</span></span>
<span id="cb48-621"><a href="#cb48-621" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-622"><a href="#cb48-622" aria-hidden="true" tabindex="-1"></a><span class="in"># 5) Compute 2020 rebound values</span></span>
<span id="cb48-623"><a href="#cb48-623" aria-hidden="true" tabindex="-1"></a><span class="in">y2020   &lt;- top_k$global_k[top_k$year == 2020]</span></span>
<span id="cb48-624"><a href="#cb48-624" aria-hidden="true" tabindex="-1"></a><span class="in">label20 &lt;- paste0(round(y2020, 1), " k")</span></span>
<span id="cb48-625"><a href="#cb48-625" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-626"><a href="#cb48-626" aria-hidden="true" tabindex="-1"></a><span class="in"># 6) Key events for vlines &amp; labels</span></span>
<span id="cb48-627"><a href="#cb48-627" aria-hidden="true" tabindex="-1"></a><span class="in">events &lt;- tribble(</span></span>
<span id="cb48-628"><a href="#cb48-628" aria-hidden="true" tabindex="-1"></a><span class="in">  ~year, ~date,         ~label,                         ~ypos,</span></span>
<span id="cb48-629"><a href="#cb48-629" aria-hidden="true" tabindex="-1"></a><span class="in">  2013,  "21 Aug 2013",  "Ghouta chemical attack",       top_k$global_k[top_k$year == 2013] + 1.5,</span></span>
<span id="cb48-630"><a href="#cb48-630" aria-hidden="true" tabindex="-1"></a><span class="in">  2016,  "17 Oct 2016",  "Battle of Mosul begins",       top_k$global_k[top_k$year == 2016] + 1.5,</span></span>
<span id="cb48-631"><a href="#cb48-631" aria-hidden="true" tabindex="-1"></a><span class="in">  2019,  "27 Oct 2019",  "Baghdadi killed by US forces", top_k$global_k[top_k$year == 2019] + 2.5</span></span>
<span id="cb48-632"><a href="#cb48-632" aria-hidden="true" tabindex="-1"></a><span class="in">)</span></span>
<span id="cb48-633"><a href="#cb48-633" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-634"><a href="#cb48-634" aria-hidden="true" tabindex="-1"></a><span class="in"># 7) Palette</span></span>
<span id="cb48-635"><a href="#cb48-635" aria-hidden="true" tabindex="-1"></a><span class="in">okabe_ito &lt;- c(</span></span>
<span id="cb48-636"><a href="#cb48-636" aria-hidden="true" tabindex="-1"></a><span class="in">  "Iraq"         = "#E69F00",</span></span>
<span id="cb48-637"><a href="#cb48-637" aria-hidden="true" tabindex="-1"></a><span class="in">  "Afghanistan"  = "#56B4E9",</span></span>
<span id="cb48-638"><a href="#cb48-638" aria-hidden="true" tabindex="-1"></a><span class="in">  "Nigeria"      = "#009E73",</span></span>
<span id="cb48-639"><a href="#cb48-639" aria-hidden="true" tabindex="-1"></a><span class="in">  "Pakistan"     = "#F0E442",</span></span>
<span id="cb48-640"><a href="#cb48-640" aria-hidden="true" tabindex="-1"></a><span class="in">  "Somalia"      = "#0072B2",</span></span>
<span id="cb48-641"><a href="#cb48-641" aria-hidden="true" tabindex="-1"></a><span class="in">  "Burkina Faso" = "#D55E00",</span></span>
<span id="cb48-642"><a href="#cb48-642" aria-hidden="true" tabindex="-1"></a><span class="in">  "Mali"         = "#CC79A7",</span></span>
<span id="cb48-643"><a href="#cb48-643" aria-hidden="true" tabindex="-1"></a><span class="in">  "Syria"        = "#999999"</span></span>
<span id="cb48-644"><a href="#cb48-644" aria-hidden="true" tabindex="-1"></a><span class="in">)</span></span>
<span id="cb48-645"><a href="#cb48-645" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-646"><a href="#cb48-646" aria-hidden="true" tabindex="-1"></a><span class="in"># 8) Plot</span></span>
<span id="cb48-647"><a href="#cb48-647" aria-hidden="true" tabindex="-1"></a><span class="in">ggplot(df, aes(x = year, y = fatalities_k, fill = country)) +</span></span>
<span id="cb48-648"><a href="#cb48-648" aria-hidden="true" tabindex="-1"></a><span class="in">  # a) stacked areas</span></span>
<span id="cb48-649"><a href="#cb48-649" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_area(color = "white", size = 0.2, alpha = 0.85) +</span></span>
<span id="cb48-650"><a href="#cb48-650" aria-hidden="true" tabindex="-1"></a><span class="in">  # b) global total line</span></span>
<span id="cb48-651"><a href="#cb48-651" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_line(data = top_k,</span></span>
<span id="cb48-652"><a href="#cb48-652" aria-hidden="true" tabindex="-1"></a><span class="in">            aes(x = year, y = global_k, color = "Global total"),</span></span>
<span id="cb48-653"><a href="#cb48-653" aria-hidden="true" tabindex="-1"></a><span class="in">            inherit.aes = FALSE, size = 1) +</span></span>
<span id="cb48-654"><a href="#cb48-654" aria-hidden="true" tabindex="-1"></a><span class="in">  # c) red anchors &amp; labels for 2013, 2016 &amp; 2019</span></span>
<span id="cb48-655"><a href="#cb48-655" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_point(data = annot_years,</span></span>
<span id="cb48-656"><a href="#cb48-656" aria-hidden="true" tabindex="-1"></a><span class="in">             aes(x = year, y = global_k),</span></span>
<span id="cb48-657"><a href="#cb48-657" aria-hidden="true" tabindex="-1"></a><span class="in">             inherit.aes = FALSE, color = "red", size = 3) +</span></span>
<span id="cb48-658"><a href="#cb48-658" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_text(data = annot_years,</span></span>
<span id="cb48-659"><a href="#cb48-659" aria-hidden="true" tabindex="-1"></a><span class="in">            aes(x = year, y = global_k, label = label),</span></span>
<span id="cb48-660"><a href="#cb48-660" aria-hidden="true" tabindex="-1"></a><span class="in">            inherit.aes = FALSE,</span></span>
<span id="cb48-661"><a href="#cb48-661" aria-hidden="true" tabindex="-1"></a><span class="in">            nudge_y = 0.5, fontface = "bold", size = 4, color = "red") +</span></span>
<span id="cb48-662"><a href="#cb48-662" aria-hidden="true" tabindex="-1"></a><span class="in">  # d) downtrend arrow (2016→2019)</span></span>
<span id="cb48-663"><a href="#cb48-663" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_segment(data = tibble(),</span></span>
<span id="cb48-664"><a href="#cb48-664" aria-hidden="true" tabindex="-1"></a><span class="in">               aes(x    = 2016,</span></span>
<span id="cb48-665"><a href="#cb48-665" aria-hidden="true" tabindex="-1"></a><span class="in">                   y    = top_k$global_k[top_k$year == 2016] + 0.8,</span></span>
<span id="cb48-666"><a href="#cb48-666" aria-hidden="true" tabindex="-1"></a><span class="in">                   xend = 2019,</span></span>
<span id="cb48-667"><a href="#cb48-667" aria-hidden="true" tabindex="-1"></a><span class="in">                   yend = top_k$global_k[top_k$year == 2019] + 0.8),</span></span>
<span id="cb48-668"><a href="#cb48-668" aria-hidden="true" tabindex="-1"></a><span class="in">               inherit.aes = FALSE,</span></span>
<span id="cb48-669"><a href="#cb48-669" aria-hidden="true" tabindex="-1"></a><span class="in">               arrow = arrow(length = unit(0.25, "cm"), type = "closed"),</span></span>
<span id="cb48-670"><a href="#cb48-670" aria-hidden="true" tabindex="-1"></a><span class="in">               color = "red", size = 0.8) +</span></span>
<span id="cb48-671"><a href="#cb48-671" aria-hidden="true" tabindex="-1"></a><span class="in">  annotate("text",</span></span>
<span id="cb48-672"><a href="#cb48-672" aria-hidden="true" tabindex="-1"></a><span class="in">           x     = 2017.5,</span></span>
<span id="cb48-673"><a href="#cb48-673" aria-hidden="true" tabindex="-1"></a><span class="in">           y     = approx(top_k$year, top_k$global_k, xout = 2017.5)$y + 1.3,</span></span>
<span id="cb48-674"><a href="#cb48-674" aria-hidden="true" tabindex="-1"></a><span class="in">           label = "Downtrend",</span></span>
<span id="cb48-675"><a href="#cb48-675" aria-hidden="true" tabindex="-1"></a><span class="in">           angle = -23,</span></span>
<span id="cb48-676"><a href="#cb48-676" aria-hidden="true" tabindex="-1"></a><span class="in">           color = "red",</span></span>
<span id="cb48-677"><a href="#cb48-677" aria-hidden="true" tabindex="-1"></a><span class="in">           fontface = "bold",</span></span>
<span id="cb48-678"><a href="#cb48-678" aria-hidden="true" tabindex="-1"></a><span class="in">           size = 4,</span></span>
<span id="cb48-679"><a href="#cb48-679" aria-hidden="true" tabindex="-1"></a><span class="in">           hjust = 0.5) +</span></span>
<span id="cb48-680"><a href="#cb48-680" aria-hidden="true" tabindex="-1"></a><span class="in">  # e) dashed line at 2020</span></span>
<span id="cb48-681"><a href="#cb48-681" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_vline(data = tibble(x = 2020),</span></span>
<span id="cb48-682"><a href="#cb48-682" aria-hidden="true" tabindex="-1"></a><span class="in">             aes(xintercept = x),</span></span>
<span id="cb48-683"><a href="#cb48-683" aria-hidden="true" tabindex="-1"></a><span class="in">             inherit.aes = FALSE,</span></span>
<span id="cb48-684"><a href="#cb48-684" aria-hidden="true" tabindex="-1"></a><span class="in">             linetype = "dashed",</span></span>
<span id="cb48-685"><a href="#cb48-685" aria-hidden="true" tabindex="-1"></a><span class="in">             color = "gray30") +</span></span>
<span id="cb48-686"><a href="#cb48-686" aria-hidden="true" tabindex="-1"></a><span class="in">  # f) 2020 rebound dot &amp; value</span></span>
<span id="cb48-687"><a href="#cb48-687" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_point(data = tibble(year = 2020, y = y2020),</span></span>
<span id="cb48-688"><a href="#cb48-688" aria-hidden="true" tabindex="-1"></a><span class="in">             aes(x = year, y = y),</span></span>
<span id="cb48-689"><a href="#cb48-689" aria-hidden="true" tabindex="-1"></a><span class="in">             inherit.aes = FALSE,</span></span>
<span id="cb48-690"><a href="#cb48-690" aria-hidden="true" tabindex="-1"></a><span class="in">             color = "red", size = 3) +</span></span>
<span id="cb48-691"><a href="#cb48-691" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_text(data = tibble(year = 2020, y = y2020, label = label20),</span></span>
<span id="cb48-692"><a href="#cb48-692" aria-hidden="true" tabindex="-1"></a><span class="in">            aes(x = year, y = y, label = label),</span></span>
<span id="cb48-693"><a href="#cb48-693" aria-hidden="true" tabindex="-1"></a><span class="in">            inherit.aes = FALSE,</span></span>
<span id="cb48-694"><a href="#cb48-694" aria-hidden="true" tabindex="-1"></a><span class="in">            nudge_y = 0.3, fontface = "bold", size = 4, color = "red") +</span></span>
<span id="cb48-695"><a href="#cb48-695" aria-hidden="true" tabindex="-1"></a><span class="in">  # g) 2020 rebound boxed note</span></span>
<span id="cb48-696"><a href="#cb48-696" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_label(data = tibble(year = 2020, y = y2020 + 0.9, label = "Affiliate Rebound"),</span></span>
<span id="cb48-697"><a href="#cb48-697" aria-hidden="true" tabindex="-1"></a><span class="in">             aes(x = year, y = y, label = label),</span></span>
<span id="cb48-698"><a href="#cb48-698" aria-hidden="true" tabindex="-1"></a><span class="in">             inherit.aes = FALSE,</span></span>
<span id="cb48-699"><a href="#cb48-699" aria-hidden="true" tabindex="-1"></a><span class="in">             size = 3.5,</span></span>
<span id="cb48-700"><a href="#cb48-700" aria-hidden="true" tabindex="-1"></a><span class="in">             fontface = "bold",</span></span>
<span id="cb48-701"><a href="#cb48-701" aria-hidden="true" tabindex="-1"></a><span class="in">             fill = "white",</span></span>
<span id="cb48-702"><a href="#cb48-702" aria-hidden="true" tabindex="-1"></a><span class="in">             color = "gray20",</span></span>
<span id="cb48-703"><a href="#cb48-703" aria-hidden="true" tabindex="-1"></a><span class="in">             label.size = 0.05) +</span></span>
<span id="cb48-704"><a href="#cb48-704" aria-hidden="true" tabindex="-1"></a><span class="in">  # h) event vlines &amp; labels</span></span>
<span id="cb48-705"><a href="#cb48-705" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_vline(data = events,</span></span>
<span id="cb48-706"><a href="#cb48-706" aria-hidden="true" tabindex="-1"></a><span class="in">             aes(xintercept = year),</span></span>
<span id="cb48-707"><a href="#cb48-707" aria-hidden="true" tabindex="-1"></a><span class="in">             inherit.aes = FALSE,</span></span>
<span id="cb48-708"><a href="#cb48-708" aria-hidden="true" tabindex="-1"></a><span class="in">             linetype = "dashed",</span></span>
<span id="cb48-709"><a href="#cb48-709" aria-hidden="true" tabindex="-1"></a><span class="in">             color = "gray30") +</span></span>
<span id="cb48-710"><a href="#cb48-710" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_label(data = events,</span></span>
<span id="cb48-711"><a href="#cb48-711" aria-hidden="true" tabindex="-1"></a><span class="in">             aes(x = year, y = ypos, label = paste0(label, "\n", date)),</span></span>
<span id="cb48-712"><a href="#cb48-712" aria-hidden="true" tabindex="-1"></a><span class="in">             inherit.aes = FALSE,</span></span>
<span id="cb48-713"><a href="#cb48-713" aria-hidden="true" tabindex="-1"></a><span class="in">             size = 4,</span></span>
<span id="cb48-714"><a href="#cb48-714" aria-hidden="true" tabindex="-1"></a><span class="in">             fontface = "bold",</span></span>
<span id="cb48-715"><a href="#cb48-715" aria-hidden="true" tabindex="-1"></a><span class="in">             fill = "white",</span></span>
<span id="cb48-716"><a href="#cb48-716" aria-hidden="true" tabindex="-1"></a><span class="in">             color = "gray20",</span></span>
<span id="cb48-717"><a href="#cb48-717" aria-hidden="true" tabindex="-1"></a><span class="in">             label.size = 0.05) +</span></span>
<span id="cb48-718"><a href="#cb48-718" aria-hidden="true" tabindex="-1"></a><span class="in">  # i) scales &amp; legend</span></span>
<span id="cb48-719"><a href="#cb48-719" aria-hidden="true" tabindex="-1"></a><span class="in">  scale_fill_manual(name = "Country", values = okabe_ito) +</span></span>
<span id="cb48-720"><a href="#cb48-720" aria-hidden="true" tabindex="-1"></a><span class="in">  scale_color_manual(NULL, values = c("Global total" = "black"),</span></span>
<span id="cb48-721"><a href="#cb48-721" aria-hidden="true" tabindex="-1"></a><span class="in">                     guide = guide_legend(override.aes = list(linetype = 1, size = 1.2))) +</span></span>
<span id="cb48-722"><a href="#cb48-722" aria-hidden="true" tabindex="-1"></a><span class="in">  scale_x_continuous(breaks = 2012:2022) +</span></span>
<span id="cb48-723"><a href="#cb48-723" aria-hidden="true" tabindex="-1"></a><span class="in">  scale_y_continuous("Fatalities (thousands)", expand = expansion(mult = c(0.05,0.15))) +</span></span>
<span id="cb48-724"><a href="#cb48-724" aria-hidden="true" tabindex="-1"></a><span class="in">  # j) labels &amp; caption</span></span>
<span id="cb48-725"><a href="#cb48-725" aria-hidden="true" tabindex="-1"></a><span class="in">  labs(</span></span>
<span id="cb48-726"><a href="#cb48-726" aria-hidden="true" tabindex="-1"></a><span class="in">    title    = "Top 8 Countries: Terrorism Fatalities (2012–2022)",</span></span>
<span id="cb48-727"><a href="#cb48-727" aria-hidden="true" tabindex="-1"></a><span class="in">    subtitle = "Peak in 2013 followed by Mosul turning point, Baghdadi’s death and Affiliate Rebound",</span></span>
<span id="cb48-728"><a href="#cb48-728" aria-hidden="true" tabindex="-1"></a><span class="in">    caption  = paste(</span></span>
<span id="cb48-729"><a href="#cb48-729" aria-hidden="true" tabindex="-1"></a><span class="in">      "Note: colored layers = fatalities by country;",</span></span>
<span id="cb48-730"><a href="#cb48-730" aria-hidden="true" tabindex="-1"></a><span class="in">      "black line = total global fatalities;",</span></span>
<span id="cb48-731"><a href="#cb48-731" aria-hidden="true" tabindex="-1"></a><span class="in">      "red dots &amp; labels = anchor totals;",</span></span>
<span id="cb48-732"><a href="#cb48-732" aria-hidden="true" tabindex="-1"></a><span class="in">      "arrow &amp; text = downtrend 2016–2019;"</span></span>
<span id="cb48-733"><a href="#cb48-733" aria-hidden="true" tabindex="-1"></a><span class="in">    ),</span></span>
<span id="cb48-734"><a href="#cb48-734" aria-hidden="true" tabindex="-1"></a><span class="in">    x = "Year"</span></span>
<span id="cb48-735"><a href="#cb48-735" aria-hidden="true" tabindex="-1"></a><span class="in">  ) +</span></span>
<span id="cb48-736"><a href="#cb48-736" aria-hidden="true" tabindex="-1"></a><span class="in">  # k) theme</span></span>
<span id="cb48-737"><a href="#cb48-737" aria-hidden="true" tabindex="-1"></a><span class="in">  theme_minimal(base_size = 14) +</span></span>
<span id="cb48-738"><a href="#cb48-738" aria-hidden="true" tabindex="-1"></a><span class="in">  theme(</span></span>
<span id="cb48-739"><a href="#cb48-739" aria-hidden="true" tabindex="-1"></a><span class="in">    plot.title            = element_text(hjust = 0.5, face = "bold", size = 16),</span></span>
<span id="cb48-740"><a href="#cb48-740" aria-hidden="true" tabindex="-1"></a><span class="in">    plot.subtitle         = element_text(hjust = 0.5, size = 12),</span></span>
<span id="cb48-741"><a href="#cb48-741" aria-hidden="true" tabindex="-1"></a><span class="in">    plot.caption          = element_text(hjust = 0, face = "italic", size = 10),</span></span>
<span id="cb48-742"><a href="#cb48-742" aria-hidden="true" tabindex="-1"></a><span class="in">    plot.caption.position = "plot",</span></span>
<span id="cb48-743"><a href="#cb48-743" aria-hidden="true" tabindex="-1"></a><span class="in">    legend.position       = "bottom",</span></span>
<span id="cb48-744"><a href="#cb48-744" aria-hidden="true" tabindex="-1"></a><span class="in">    panel.grid.minor      = element_blank()</span></span>
<span id="cb48-745"><a href="#cb48-745" aria-hidden="true" tabindex="-1"></a><span class="in">  )</span></span>
<span id="cb48-746"><a href="#cb48-746" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb48-747"><a href="#cb48-747" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-748"><a href="#cb48-748" aria-hidden="true" tabindex="-1"></a>::: insight-box</span>
<span id="cb48-749"><a href="#cb48-749" aria-hidden="true" tabindex="-1"></a>Key Insights from Annual Fatalities (2012–2022):</span>
<span id="cb48-750"><a href="#cb48-750" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-751"><a href="#cb48-751" aria-hidden="true" tabindex="-1"></a>Global Peak &amp; Major Surges: Total terrorism deaths hit their highest point around 2013, driven largely by ISIS’s rise (declared caliphate in June 2014) and the Ghouta chemical attack (Aug 2013). A secondary surge in 2016 coincides with the Battle of Mosul.</span>
<span id="cb48-752"><a href="#cb48-752" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-753"><a href="#cb48-753" aria-hidden="true" tabindex="-1"></a>Steady Decline Post-2016: After Mosul, overall fatalities fell sharply through 2017–2019, culminating in the killing of ISIS leader Baghdadi in October 2019.</span>
<span id="cb48-754"><a href="#cb48-754" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-755"><a href="#cb48-755" aria-hidden="true" tabindex="-1"></a>Recent Uptick &amp; Shifts: From 2020 onward fatalities stabilized at lower levels, with a mild rebound in 2021 as the Taliban recaptured Kabul.</span>
<span id="cb48-756"><a href="#cb48-756" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-757"><a href="#cb48-757" aria-hidden="true" tabindex="-1"></a>Country Contributions: Iraq and Nigeria remain the largest contributors throughout, followed by Afghanistan and Somalia, while the Sahel states (Burkina Faso, Mali) gradually account for a bigger share in later years.</span>
<span id="cb48-758"><a href="#cb48-758" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb48-759"><a href="#cb48-759" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-760"><a href="#cb48-760" aria-hidden="true" tabindex="-1"></a><span class="fu"># 5. Conclusion {.section-header}</span></span>
<span id="cb48-761"><a href="#cb48-761" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-762"><a href="#cb48-762" aria-hidden="true" tabindex="-1"></a>::: description-box</span>
<span id="cb48-763"><a href="#cb48-763" aria-hidden="true" tabindex="-1"></a>This analysis has examined the Global Terrorism Index data from multiple perspectives, revealing important patterns in how terrorism has impacted different countries over the past decade. The visualizations highlight both the geographic concentration of terrorism and its evolving nature over time. &lt;br&gt;&lt;br&gt; Several key findings emerge:&lt;br&gt;&lt;br&gt;</span>
<span id="cb48-764"><a href="#cb48-764" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-765"><a href="#cb48-765" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Terrorism impact is highly concentrated in a small number of countries, particularly in the Middle East, South Asia, and parts of Africa&lt;br&gt;</span>
<span id="cb48-766"><a href="#cb48-766" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-767"><a href="#cb48-767" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>The overall global trend shows a peak in terrorism impact around 2013–2016, followed by a general decline&lt;br&gt;</span>
<span id="cb48-768"><a href="#cb48-768" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-769"><a href="#cb48-769" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Different countries show distinct patterns of improvement or deterioration in their terrorism situation&lt;br&gt;</span>
<span id="cb48-770"><a href="#cb48-770" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-771"><a href="#cb48-771" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>The various dimensions of terrorism impact (fatalities, injuries, incidents, hostages) affect countries in different proportions&lt;br&gt;</span>
<span id="cb48-772"><a href="#cb48-772" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-773"><a href="#cb48-773" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>The severity classification framework provides valuable context for interpreting GTI scores&lt;br&gt;&lt;br&gt; These insights can inform policy discussions about international security cooperation, humanitarian assistance, and targeted counter-terrorism efforts in the most affected regions.</span>
<span id="cb48-774"><a href="#cb48-774" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb48-775"><a href="#cb48-775" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-776"><a href="#cb48-776" aria-hidden="true" tabindex="-1"></a><span class="fu"># 6. Additional Information {.section-header}</span></span>
<span id="cb48-777"><a href="#cb48-777" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-778"><a href="#cb48-778" aria-hidden="true" tabindex="-1"></a><span class="in">```{r interactive-stack-colored-tooltip, echo=FALSE}</span></span>
<span id="cb48-779"><a href="#cb48-779" aria-hidden="true" tabindex="-1"></a><span class="in">library(dplyr)</span></span>
<span id="cb48-780"><a href="#cb48-780" aria-hidden="true" tabindex="-1"></a><span class="in">library(plotly)</span></span>
<span id="cb48-781"><a href="#cb48-781" aria-hidden="true" tabindex="-1"></a><span class="in">library(purrr)</span></span>
<span id="cb48-782"><a href="#cb48-782" aria-hidden="true" tabindex="-1"></a><span class="in">library(tibble)</span></span>
<span id="cb48-783"><a href="#cb48-783" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-784"><a href="#cb48-784" aria-hidden="true" tabindex="-1"></a><span class="in"># 1) Data prep</span></span>
<span id="cb48-785"><a href="#cb48-785" aria-hidden="true" tabindex="-1"></a><span class="in">df_plot &lt;- filtered_df %&gt;%</span></span>
<span id="cb48-786"><a href="#cb48-786" aria-hidden="true" tabindex="-1"></a><span class="in">  group_by(country, year) %&gt;%</span></span>
<span id="cb48-787"><a href="#cb48-787" aria-hidden="true" tabindex="-1"></a><span class="in">  summarise(fatalities_k = sum(fatalities, na.rm = TRUE) / 1000, .groups = "drop")</span></span>
<span id="cb48-788"><a href="#cb48-788" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-789"><a href="#cb48-789" aria-hidden="true" tabindex="-1"></a><span class="in">top_k &lt;- df_plot %&gt;%</span></span>
<span id="cb48-790"><a href="#cb48-790" aria-hidden="true" tabindex="-1"></a><span class="in">  group_by(year) %&gt;%</span></span>
<span id="cb48-791"><a href="#cb48-791" aria-hidden="true" tabindex="-1"></a><span class="in">  summarise(global_k = sum(fatalities_k), .groups = "drop")</span></span>
<span id="cb48-792"><a href="#cb48-792" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-793"><a href="#cb48-793" aria-hidden="true" tabindex="-1"></a><span class="in"># 2) Palette &amp; stacking order</span></span>
<span id="cb48-794"><a href="#cb48-794" aria-hidden="true" tabindex="-1"></a><span class="in">okabe_ito &lt;- c(</span></span>
<span id="cb48-795"><a href="#cb48-795" aria-hidden="true" tabindex="-1"></a><span class="in">  "Iraq"         = "#E69F00",</span></span>
<span id="cb48-796"><a href="#cb48-796" aria-hidden="true" tabindex="-1"></a><span class="in">  "Afghanistan"  = "#56B4E9",</span></span>
<span id="cb48-797"><a href="#cb48-797" aria-hidden="true" tabindex="-1"></a><span class="in">  "Nigeria"      = "#009E73",</span></span>
<span id="cb48-798"><a href="#cb48-798" aria-hidden="true" tabindex="-1"></a><span class="in">  "Pakistan"     = "#F0E442",</span></span>
<span id="cb48-799"><a href="#cb48-799" aria-hidden="true" tabindex="-1"></a><span class="in">  "Somalia"      = "#0072B2",</span></span>
<span id="cb48-800"><a href="#cb48-800" aria-hidden="true" tabindex="-1"></a><span class="in">  "Burkina Faso" = "#D55E00",</span></span>
<span id="cb48-801"><a href="#cb48-801" aria-hidden="true" tabindex="-1"></a><span class="in">  "Mali"         = "#CC79A7",</span></span>
<span id="cb48-802"><a href="#cb48-802" aria-hidden="true" tabindex="-1"></a><span class="in">  "Syria"        = "#999999"</span></span>
<span id="cb48-803"><a href="#cb48-803" aria-hidden="true" tabindex="-1"></a><span class="in">)</span></span>
<span id="cb48-804"><a href="#cb48-804" aria-hidden="true" tabindex="-1"></a><span class="in">order_levels &lt;- df_plot %&gt;%</span></span>
<span id="cb48-805"><a href="#cb48-805" aria-hidden="true" tabindex="-1"></a><span class="in">  group_by(country) %&gt;%</span></span>
<span id="cb48-806"><a href="#cb48-806" aria-hidden="true" tabindex="-1"></a><span class="in">  summarise(total = sum(fatalities_k), .groups = "drop") %&gt;%</span></span>
<span id="cb48-807"><a href="#cb48-807" aria-hidden="true" tabindex="-1"></a><span class="in">  arrange(total) %&gt;%</span></span>
<span id="cb48-808"><a href="#cb48-808" aria-hidden="true" tabindex="-1"></a><span class="in">  pull(country)</span></span>
<span id="cb48-809"><a href="#cb48-809" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-810"><a href="#cb48-810" aria-hidden="true" tabindex="-1"></a><span class="in"># 3) Initialize plotly</span></span>
<span id="cb48-811"><a href="#cb48-811" aria-hidden="true" tabindex="-1"></a><span class="in">p &lt;- plot_ly()</span></span>
<span id="cb48-812"><a href="#cb48-812" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-813"><a href="#cb48-813" aria-hidden="true" tabindex="-1"></a><span class="in"># 4) Vertical dotted guides for each year</span></span>
<span id="cb48-814"><a href="#cb48-814" aria-hidden="true" tabindex="-1"></a><span class="in">for (xv in 2012:2022) {</span></span>
<span id="cb48-815"><a href="#cb48-815" aria-hidden="true" tabindex="-1"></a><span class="in">  p &lt;- p %&gt;% add_segments(</span></span>
<span id="cb48-816"><a href="#cb48-816" aria-hidden="true" tabindex="-1"></a><span class="in">    x = xv, xend = xv,</span></span>
<span id="cb48-817"><a href="#cb48-817" aria-hidden="true" tabindex="-1"></a><span class="in">    y = 0, yend = max(top_k$global_k) * 1.2,</span></span>
<span id="cb48-818"><a href="#cb48-818" aria-hidden="true" tabindex="-1"></a><span class="in">    line = list(dash = "dot", color = "gray80", width = 0.5),</span></span>
<span id="cb48-819"><a href="#cb48-819" aria-hidden="true" tabindex="-1"></a><span class="in">    showlegend = FALSE, hoverinfo = "none"</span></span>
<span id="cb48-820"><a href="#cb48-820" aria-hidden="true" tabindex="-1"></a><span class="in">  )</span></span>
<span id="cb48-821"><a href="#cb48-821" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb48-822"><a href="#cb48-822" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-823"><a href="#cb48-823" aria-hidden="true" tabindex="-1"></a><span class="in"># 5) Stacked areas (no individual hover)</span></span>
<span id="cb48-824"><a href="#cb48-824" aria-hidden="true" tabindex="-1"></a><span class="in">for (ctry in rev(order_levels)) {</span></span>
<span id="cb48-825"><a href="#cb48-825" aria-hidden="true" tabindex="-1"></a><span class="in">  sub &lt;- filter(df_plot, country == ctry)</span></span>
<span id="cb48-826"><a href="#cb48-826" aria-hidden="true" tabindex="-1"></a><span class="in">  p &lt;- p %&gt;% add_trace(</span></span>
<span id="cb48-827"><a href="#cb48-827" aria-hidden="true" tabindex="-1"></a><span class="in">    x = sub$year,</span></span>
<span id="cb48-828"><a href="#cb48-828" aria-hidden="true" tabindex="-1"></a><span class="in">    y = sub$fatalities_k,</span></span>
<span id="cb48-829"><a href="#cb48-829" aria-hidden="true" tabindex="-1"></a><span class="in">    name = ctry,</span></span>
<span id="cb48-830"><a href="#cb48-830" aria-hidden="true" tabindex="-1"></a><span class="in">    type = "scatter",</span></span>
<span id="cb48-831"><a href="#cb48-831" aria-hidden="true" tabindex="-1"></a><span class="in">    mode = "none",</span></span>
<span id="cb48-832"><a href="#cb48-832" aria-hidden="true" tabindex="-1"></a><span class="in">    stackgroup = "one",</span></span>
<span id="cb48-833"><a href="#cb48-833" aria-hidden="true" tabindex="-1"></a><span class="in">    fillcolor = okabe_ito[ctry],</span></span>
<span id="cb48-834"><a href="#cb48-834" aria-hidden="true" tabindex="-1"></a><span class="in">    hoverinfo = "none"</span></span>
<span id="cb48-835"><a href="#cb48-835" aria-hidden="true" tabindex="-1"></a><span class="in">  )</span></span>
<span id="cb48-836"><a href="#cb48-836" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb48-837"><a href="#cb48-837" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-838"><a href="#cb48-838" aria-hidden="true" tabindex="-1"></a><span class="in"># 6) Global total line — hover turned off here</span></span>
<span id="cb48-839"><a href="#cb48-839" aria-hidden="true" tabindex="-1"></a><span class="in">p &lt;- p %&gt;% add_trace(</span></span>
<span id="cb48-840"><a href="#cb48-840" aria-hidden="true" tabindex="-1"></a><span class="in">  data      = top_k,</span></span>
<span id="cb48-841"><a href="#cb48-841" aria-hidden="true" tabindex="-1"></a><span class="in">  x         = ~year,</span></span>
<span id="cb48-842"><a href="#cb48-842" aria-hidden="true" tabindex="-1"></a><span class="in">  y         = ~global_k,</span></span>
<span id="cb48-843"><a href="#cb48-843" aria-hidden="true" tabindex="-1"></a><span class="in">  name      = "Global total",</span></span>
<span id="cb48-844"><a href="#cb48-844" aria-hidden="true" tabindex="-1"></a><span class="in">  type      = "scatter",</span></span>
<span id="cb48-845"><a href="#cb48-845" aria-hidden="true" tabindex="-1"></a><span class="in">  mode      = "lines",</span></span>
<span id="cb48-846"><a href="#cb48-846" aria-hidden="true" tabindex="-1"></a><span class="in">  line      = list(color = "black", width = 2),</span></span>
<span id="cb48-847"><a href="#cb48-847" aria-hidden="true" tabindex="-1"></a><span class="in">  hoverinfo = "none"    # &lt;- disable its own popup</span></span>
<span id="cb48-848"><a href="#cb48-848" aria-hidden="true" tabindex="-1"></a><span class="in">)</span></span>
<span id="cb48-849"><a href="#cb48-849" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-850"><a href="#cb48-850" aria-hidden="true" tabindex="-1"></a><span class="in"># 7) Consolidated tooltip at each year</span></span>
<span id="cb48-851"><a href="#cb48-851" aria-hidden="true" tabindex="-1"></a><span class="in">tooltip_df &lt;- top_k %&gt;%</span></span>
<span id="cb48-852"><a href="#cb48-852" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(</span></span>
<span id="cb48-853"><a href="#cb48-853" aria-hidden="true" tabindex="-1"></a><span class="in">    tooltip = map_chr(year, function(y) {</span></span>
<span id="cb48-854"><a href="#cb48-854" aria-hidden="true" tabindex="-1"></a><span class="in">      rows &lt;- filter(df_plot, year == y)</span></span>
<span id="cb48-855"><a href="#cb48-855" aria-hidden="true" tabindex="-1"></a><span class="in">      # build lines: Year + Global + each country</span></span>
<span id="cb48-856"><a href="#cb48-856" aria-hidden="true" tabindex="-1"></a><span class="in">      hdr  &lt;- paste0("Year: ", y, "&lt;br&gt;Global total: ", round(global_k[year==y],2), " k deaths")</span></span>
<span id="cb48-857"><a href="#cb48-857" aria-hidden="true" tabindex="-1"></a><span class="in">      cntr &lt;- map_chr(order_levels, function(ct) {</span></span>
<span id="cb48-858"><a href="#cb48-858" aria-hidden="true" tabindex="-1"></a><span class="in">        val &lt;- rows$fatalities_k[rows$country == ct]</span></span>
<span id="cb48-859"><a href="#cb48-859" aria-hidden="true" tabindex="-1"></a><span class="in">        sprintf("&lt;span style='color:%s'&gt;&amp;#9632;&lt;/span&gt; %s: %.2f k deaths", </span></span>
<span id="cb48-860"><a href="#cb48-860" aria-hidden="true" tabindex="-1"></a><span class="in">                okabe_ito[ct], ct, val)</span></span>
<span id="cb48-861"><a href="#cb48-861" aria-hidden="true" tabindex="-1"></a><span class="in">      })</span></span>
<span id="cb48-862"><a href="#cb48-862" aria-hidden="true" tabindex="-1"></a><span class="in">      paste(c(hdr, cntr), collapse = "&lt;br&gt;")</span></span>
<span id="cb48-863"><a href="#cb48-863" aria-hidden="true" tabindex="-1"></a><span class="in">    })</span></span>
<span id="cb48-864"><a href="#cb48-864" aria-hidden="true" tabindex="-1"></a><span class="in">  )</span></span>
<span id="cb48-865"><a href="#cb48-865" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-866"><a href="#cb48-866" aria-hidden="true" tabindex="-1"></a><span class="in">p &lt;- p %&gt;% add_trace(</span></span>
<span id="cb48-867"><a href="#cb48-867" aria-hidden="true" tabindex="-1"></a><span class="in">  data       = tooltip_df,</span></span>
<span id="cb48-868"><a href="#cb48-868" aria-hidden="true" tabindex="-1"></a><span class="in">  x          = ~year,</span></span>
<span id="cb48-869"><a href="#cb48-869" aria-hidden="true" tabindex="-1"></a><span class="in">  y          = max(top_k$global_k) * 1.2,  # above the stack</span></span>
<span id="cb48-870"><a href="#cb48-870" aria-hidden="true" tabindex="-1"></a><span class="in">  type       = "scatter",</span></span>
<span id="cb48-871"><a href="#cb48-871" aria-hidden="true" tabindex="-1"></a><span class="in">  mode       = "markers",</span></span>
<span id="cb48-872"><a href="#cb48-872" aria-hidden="true" tabindex="-1"></a><span class="in">  marker     = list(size = 0),</span></span>
<span id="cb48-873"><a href="#cb48-873" aria-hidden="true" tabindex="-1"></a><span class="in">  hoverinfo  = "text",</span></span>
<span id="cb48-874"><a href="#cb48-874" aria-hidden="true" tabindex="-1"></a><span class="in">  text       = ~tooltip,</span></span>
<span id="cb48-875"><a href="#cb48-875" aria-hidden="true" tabindex="-1"></a><span class="in">  hoverlabel = list(align = "left", font = list(size = 10)),</span></span>
<span id="cb48-876"><a href="#cb48-876" aria-hidden="true" tabindex="-1"></a><span class="in">  showlegend = FALSE</span></span>
<span id="cb48-877"><a href="#cb48-877" aria-hidden="true" tabindex="-1"></a><span class="in">)</span></span>
<span id="cb48-878"><a href="#cb48-878" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-879"><a href="#cb48-879" aria-hidden="true" tabindex="-1"></a><span class="in"># 8) Final layout</span></span>
<span id="cb48-880"><a href="#cb48-880" aria-hidden="true" tabindex="-1"></a><span class="in">p %&gt;% layout(</span></span>
<span id="cb48-881"><a href="#cb48-881" aria-hidden="true" tabindex="-1"></a><span class="in">  title     = list(text = "Top 8 Countries: Terrorism Fatalities (2012–2022)", x = 0.5),</span></span>
<span id="cb48-882"><a href="#cb48-882" aria-hidden="true" tabindex="-1"></a><span class="in">  xaxis     = list(title = "Year", tickmode = "array", tickvals = 2012:2022),</span></span>
<span id="cb48-883"><a href="#cb48-883" aria-hidden="true" tabindex="-1"></a><span class="in">  yaxis     = list(title = "Fatalities (thousands)", range = c(0, max(top_k$global_k)*1.25)),</span></span>
<span id="cb48-884"><a href="#cb48-884" aria-hidden="true" tabindex="-1"></a><span class="in">  legend    = list(orientation = "h", x = 0.1, y = -0.2),</span></span>
<span id="cb48-885"><a href="#cb48-885" aria-hidden="true" tabindex="-1"></a><span class="in">  margin    = list(b = 80),</span></span>
<span id="cb48-886"><a href="#cb48-886" aria-hidden="true" tabindex="-1"></a><span class="in">  hovermode = "x unified"</span></span>
<span id="cb48-887"><a href="#cb48-887" aria-hidden="true" tabindex="-1"></a><span class="in">)</span></span>
<span id="cb48-888"><a href="#cb48-888" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb48-889"><a href="#cb48-889" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-892"><a href="#cb48-892" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb48-893"><a href="#cb48-893" aria-hidden="true" tabindex="-1"></a>htmlwidgets<span class="sc">::</span><span class="fu">saveWidget</span>(</span>
<span id="cb48-894"><a href="#cb48-894" aria-hidden="true" tabindex="-1"></a>  p,                                     <span class="co"># your plotly object</span></span>
<span id="cb48-895"><a href="#cb48-895" aria-hidden="true" tabindex="-1"></a>  <span class="at">file          =</span> <span class="st">"terror-fatalities-stack.html"</span>,</span>
<span id="cb48-896"><a href="#cb48-896" aria-hidden="true" tabindex="-1"></a>  <span class="at">selfcontained =</span> <span class="cn">TRUE</span></span>
<span id="cb48-897"><a href="#cb48-897" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb48-898"><a href="#cb48-898" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-899"><a href="#cb48-899" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
</code><button title="Copy to Clipboard" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->




</body></html>